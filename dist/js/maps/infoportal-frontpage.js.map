{"version":3,"sources":["listenForAttachmentChanges.js","setupFormValidation.js","addListExpandHandler.js","feedbackToggle.js","selectableCheckbox.js","altinnDropdown.js","handleFocus.js","setupTruncateLines.js","altinnLoader.js","showPassword.js","altinnModal.js","toggleFilter.js","altinnQuickhelp.js","menuToggleEffect.js","toggleInstant.js","mobileNavigation.js","togglePanel.js","clickableRow.js","compareTo.js","personSwitcher.js","validation.js","popover.js","expandContent.js","ios11BugWorkaround.js","contactForm.js","infoportal-frontpage-init.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../infoportal-frontpage.js","sourcesContent":["/* globals $, Foundation */\r\nvar listenForAttachmentChanges = function(formId, errorMessageCallback) {\r\n  var maxSizeInMb = 15;\r\n  var maxSizeInBytes = maxSizeInMb * 1024 * 1024;\r\n  var allowedExtensions = [\r\n    'bmp', 'jpg', 'jpeg', 'png', 'gif', 'txt', 'log', 'csv', 'doc', 'docx', 'xls', 'xlsx', 'ppt',\r\n    'pptx', 'pdf', 'odt', 'ods', 'odp', 'rtf', 'rar', 'zip', '7z', 'gdoc', 'gsheet', 'gslide', 'htm',\r\n    'html', 'eml', 'msg'\r\n  ];\r\n\r\n  var fileInput = $(formId).find('.a-js-uploadAttachment').find('#newCertificateInput');\r\n  var attachmentErrorBox = $(formId).find('.a-js-upload-error');\r\n  var attachmentBox = $(formId).find('.a-js-attachment-box');\r\n  var attachmentNameText = $(attachmentBox).find('.a-js-attachment-name');\r\n  var deleteAttachmentButton = $(attachmentBox).find('.a-btn-delete');\r\n  var selectedFile = '';\r\n\r\n  attachmentErrorBox.hide();\r\n  attachmentBox.hide();\r\n\r\n  deleteAttachmentButton.click(function() {\r\n    fileInput.val(''); // reset content\r\n    attachmentBox.hide();\r\n    attachmentErrorBox.hide();\r\n    fileInput.parent().show();\r\n  });\r\n\r\n  $(fileInput).change(function(event) {\r\n    if (event.target.files.length > 0) {\r\n      selectedFile = event.target.files[0];\r\n    }\r\n\r\n    function handleFile(file) {\r\n      var fileName = file.name;\r\n      var extension = fileName.split('.').pop();\r\n      var byteSize = file.size;\r\n\r\n      var validExtension = $.inArray(extension, allowedExtensions) > -1;\r\n      var validFileSize = maxSizeInBytes > byteSize;\r\n\r\n      if (validExtension && validFileSize) {\r\n        // success:\r\n        // set file name and show 'attachment box'\r\n        // hide 'error box'\r\n        // hide upload button\r\n\r\n        attachmentNameText.text(fileName);\r\n        attachmentBox.show();\r\n        attachmentErrorBox.hide();\r\n        fileInput.parent().hide();\r\n      } else {\r\n        // failure:\r\n        // hide 'attachment box'\r\n        // show 'error box'\r\n        // show upload button\r\n        attachmentBox.hide();\r\n        attachmentErrorBox.show();\r\n        fileInput.parent().show();\r\n      }\r\n\r\n      if (!validFileSize) {\r\n        attachmentErrorBox.find('.a-message-error').text(errorMessageCallback('size') + ': ' + maxSizeInMb + 'MB');\r\n      } else if (!validExtension) {\r\n        attachmentErrorBox.find('.a-message-error').text(errorMessageCallback('ext') + ': ' + allowedExtensions.join(', '));\r\n      }\r\n    }\r\n\r\n    if (selectedFile) {\r\n      handleFile(selectedFile);\r\n    } else {\r\n      attachmentBox.hide();\r\n    }\r\n  });\r\n};\r\n","/* globals $ */\r\nfunction setupFormValidation(formId, buttonId) {\r\n  var $submitBtn = $(buttonId);\r\n  var wasSubmitted = false;\r\n  var storedString = '';\r\n  var validDropdown = function(el) {\r\n    if (\r\n      el.attr('required') !== undefined && el.attr('required') === 'required' &&\r\n      el.attr('data-dropdowndefaultvalue') === el.find('.a-form-text').text()\r\n    ) {\r\n      el.closest('.a-form-group').addClass('has-error').find('.a-message-error').css('display', 'table');\r\n    } else {\r\n      el.closest('.a-form-group').removeClass('has-error').find('.a-message-error').css('display', 'none');\r\n    }\r\n  };\r\n  var validAllDropdowns = function() {\r\n    var invalids = [];\r\n    $('.a-js-dropdownToValidate').each(function(index, el) {\r\n      if (\r\n        $(el).attr('required') !== undefined && $(el).attr('required') === 'required' &&\r\n        $(el).attr('data-dropdowndefaultvalue') === $(el).find('.a-form-text').text()\r\n      ) {\r\n        invalids.push(index);\r\n      }\r\n    });\r\n    return invalids.length === 0;\r\n  };\r\n  var validAllReferancials = function() {\r\n    var invalids = [];\r\n    $('.a-js-validateThisAgainstPrev').each(function(index, el) {\r\n      if (\r\n        $(el).closest('.a-form-group').hasClass('has-error')\r\n      ) {\r\n        invalids.push(index);\r\n      }\r\n    });\r\n    return invalids.length === 0;\r\n  };\r\n  var validateBackwards = function(el) {\r\n    if (el.prev().find('.a-js-dropdownToValidate').length > 0) {\r\n      validDropdown(el.prev().find('.a-js-dropdownToValidate'));\r\n      validateBackwards(el.prev());\r\n    } else if (el.prev().hasClass('form-group')) {\r\n      if (el.prev().find('input:not(.a-js-validateThisAgainstPrev)').length > 0) {\r\n        el.prev().find('input:not(.a-js-validateThisAgainstPrev)').valid();\r\n      }\r\n      if (el.prev().find('.a-js-validateThisAgainstPrev').length > 0) {\r\n        el.prev().find('.a-js-validateThisAgainstPrev').trigger('change');\r\n      }\r\n      if (el.prev().find('textarea').length > 0) {\r\n        el.prev().find('textarea').valid();\r\n      }\r\n      validateBackwards(el.prev());\r\n    }\r\n  };\r\n  var validateAgainstPrev = function() {\r\n    if ($(this).closest('.form-group').prev().find('.a-message-error')\r\n      .text() !== '') {\r\n      $(this).closest('.form-group').find('.a-message-error').text(\r\n        $(this).closest('.form-group').prev().find('.a-message-error')\r\n          .text()\r\n      );\r\n      storedString = $(this).closest('.form-group').prev().find('.a-message-error')\r\n        .text();\r\n    } else {\r\n      $(this).closest('.form-group').find('.a-message-error').text(\r\n        storedString\r\n      );\r\n    }\r\n    if ($(this).val() !==\r\n      $(this).closest('.form-group').prev().find('input')\r\n        .val() || $(this).val() === '') {\r\n      setTimeout(function() {\r\n        $(this).closest('.a-form-group').addClass('has-error').find('.a-message-error')\r\n          .css('display', 'table');\r\n      }.bind(this), 0);\r\n    } else {\r\n      $(this).closest('.a-form-group').removeClass('has-error').find('.a-message-error')\r\n        .css('display', 'none');\r\n    }\r\n  };\r\n\r\n  var validateForm = function() {\r\n    var str;\r\n    if ($(formId).validate().checkForm() && validAllDropdowns() && validAllReferancials()) {\r\n      $submitBtn.prop('disabled', false);\r\n      $submitBtn.removeClass('disabled');\r\n    } else {\r\n      $submitBtn.prop('disabled', 'disabled');\r\n      $submitBtn.addClass('disabled');\r\n    }\r\n\r\n    if (!wasSubmitted) {\r\n      $(formId).validate().submitted = {};\r\n    }\r\n  };\r\n\r\n  $(formId + ' .a-js-dropdownToValidate').each(function() {\r\n    $(this).attr('data-dropdowndefaultvalue', $(this).find('.a-form-text').text());\r\n  });\r\n\r\n  if (!buttonId) {\r\n    $submitBtn = $(formId + ' button[type=\"submit\"]');\r\n  }\r\n  $.validator.unobtrusive.parse($(formId));\r\n\r\n  $submitBtn.addClass('disabled');\r\n  $submitBtn.prop('disabled', 'disabled');\r\n\r\n  $(formId).on('blur input change', '*', validateForm);\r\n\r\n  $(formId + ' .a-js-dropdownToValidate').next().on('click', function() {\r\n    setTimeout(function() {\r\n      validDropdown($(this).prev());\r\n    }.bind(this), 0);\r\n    validateBackwards($(this).closest('.form-group'));\r\n  });\r\n\r\n  $(formId + ' .a-js-dropdownToValidate').on('blur', function() {\r\n    validDropdown($(this));\r\n    validateBackwards($(this).closest('.form-group'));\r\n  });\r\n  $('.a-js-certificateContainer').on('focus', function() {\r\n    $('.a-js-certificateContainer').closest('label').addClass('a-custom-fileupload--focused');\r\n  });\r\n  $('.a-js-certificateContainer').on('blur', function() {\r\n    $('.a-js-certificateContainer').closest('label').removeClass('a-custom-fileupload--focused');\r\n  });\r\n  $('.a-js-validateThisAgainstPrev').each(function() {\r\n    storedString = $(this).closest('.form-group').prev().find('input')\r\n      .attr('data-val-regex');\r\n  });\r\n\r\n  $(formId + ' .form-control').not('.a-js-validateThisAgainstPrev').on('blur change', function() {\r\n    var $nextInput = $('#text-input-epost1').closest('.form-group').next().find('.a-js-validateThisAgainstPrev');\r\n    if ($nextInput.length > 0 && $nextInput.val() !== '') {\r\n      validateAgainstPrev.bind($nextInput)();\r\n      setTimeout(function() {\r\n        validateForm();\r\n      }, 0);\r\n    }\r\n  });\r\n  $('.a-js-validateThisAgainstPrev').on('keyup', function(e) {\r\n    var hasError = $(this).closest('.form-group').hasClass('has-error');\r\n    e.stopPropagation();\r\n    if (hasError) {\r\n      validateAgainstPrev.bind(this)();\r\n    }\r\n  });\r\n\r\n  $('.a-js-validateThisAgainstPrev').on('change blur', function(e) {\r\n    e.stopPropagation();\r\n    validateAgainstPrev.bind(this)();\r\n  });\r\n}\r\n","var addListExpandHandler = function() {\r\n  $('body').on('click', '.a-list *[data-toggle=\"collapse\"]', function() {\r\n    // This script runs before the bootstrap collapse handler, so the collapsed-class will still be\r\n    // present even though the content is about to be expanded\r\n    if ($(this).hasClass('collapsed')) {\r\n      $(this).closest('li').addClass('a-expanded');\r\n      $(this).closest('li').siblings().removeClass('a-expanded');\r\n    } else {\r\n      $(this).closest('li').removeClass('a-expanded');\r\n    }\r\n  });\r\n};\r\n","/* globals $ */\r\nvar feedbackToggle = function() {\r\n  if ($('.a-js-feedbackToggle').length > 0) {\r\n    $('.a-js-feedbackToggle').closest('fieldset').next().hide();\r\n    $('.a-js-feedbackToggle').closest('fieldset').next().next()\r\n      .hide();\r\n    $('.a-js-feedbackToggle').closest('fieldset').next().next()\r\n      .next()\r\n      .hide();\r\n    $('.a-js-feedbackToggle').each(function() {\r\n      $(this).find('input[type=radio]').change(function() {\r\n        if ($(this).val() === 'radio1' && $(this).is(':checked')) {\r\n          $(this).closest('fieldset').next().show();\r\n          $(this).closest('fieldset').next().next()\r\n            .hide();\r\n          $(this).closest('fieldset').next().next()\r\n            .next()\r\n            .hide();\r\n        } else if ($(this).val() === 'radio2' && $(this).is(':checked')) {\r\n          $(this).closest('fieldset').next().hide();\r\n          $(this).closest('fieldset').next().next()\r\n            .show();\r\n          $(this).closest('fieldset').next().next()\r\n            .next()\r\n            .show();\r\n        }\r\n      });\r\n      $(this).closest('form').find('button').on('click', function() {\r\n        $(this).closest('fieldset').next().show();\r\n        $(this).closest('fieldset').next().next()\r\n          .hide();\r\n        $(this).closest('fieldset').next().next()\r\n          .next()\r\n          .hide();\r\n      }.bind(this));\r\n    });\r\n  }\r\n};\r\n","var setupSelectableCheckbox = function() {\r\n  $('body').on('change', '.a-js-selectable-checkbox', function() {\r\n    if ($(this).is(':checked')) {\r\n      $(this).closest('.a-selectable').addClass('a-selected');\r\n    } else {\r\n      $(this).closest('.a-selectable').removeClass('a-selected');\r\n    }\r\n  });\r\n\r\n  $('body').on('focus', '.a-js-selectable-checkbox', function() {\r\n    $(this).closest('.a-selectable').addClass('a-focus');\r\n  });\r\n\r\n  $('body').on('blur', '.a-js-selectable-checkbox', function() {\r\n    $(this).closest('.a-selectable').removeClass('a-focus');\r\n  });\r\n};\r\n","/* eslint vars-on-top: 0 */\r\n/* globals AltinnDropdown */\r\n/* globals AltinnDropdown:true */\r\nAltinnDropdown = {\r\n  init: function() {\r\n    var that = this;\r\n    $('body').on('click', '[data-toggle=\"altinn-dropdown\"] .a-dropdown-item', function() {\r\n      var $dropdownElement = $(this).closest('[data-toggle=\"altinn-dropdown\"]');\r\n      if ($(this).data('value')) {\r\n        $dropdownElement.find('.a-js-altinnDropdown-value').val($(this).data('value'));\r\n      }\r\n\r\n      $dropdownElement.find('.a-dropdown-toggle').html($(this).html());\r\n\r\n      // Focus the dropdownmenu element after click on item in dropdownmenu\r\n      var id = $(this).closest('.a-dropdown-menu').attr('aria-labelledby');\r\n      $('#' + id).focus();\r\n    });\r\n  }\r\n};\r\n","/* globals $ */\r\nvar handleFocus = function() {\r\n  // If state on input is 'focus', add class to a-input: 'a-input-focus'\r\n  $('body').on('focus', 'input.form-control', function() {\r\n    $(this).parent().addClass('a-input-focus');\r\n  });\r\n\r\n  $('body').on('blur', 'input.form-control', function() {\r\n    $(this).parent().removeClass('a-input-focus');\r\n  });\r\n\r\n  $('.a-radioButtons-stackedList').find('input[type=radio]').change(function() {\r\n    var me = $(this);\r\n    if (me.is(':checked')) {\r\n      me.parent().addClass('a-js-radioParentGray');\r\n      $('input[type=radio]').each(function() {\r\n        if ($(this).attr('id') !== me.attr('id') &&\r\n          $(this).attr('name') === me.attr('name')) {\r\n          $(this).parent().removeClass('a-js-radioParentGray');\r\n        }\r\n      });\r\n    }\r\n  });\r\n};\r\n","var setupTruncateLines = function() {\r\n  setTimeout(function() {\r\n    // Max two lines for all screen sizes\r\n    $('.a-js-truncate-2').truncate({\r\n      lines: 2\r\n    });\r\n    // Max two lines for screen sizes less than 768\r\n    // Intit with 3 lines instead of 2 for IE11\r\n    if (!!window.MSInputMethodContext\r\n      && !!document.documentMode\r\n      && window.innerWidth < 768) {\r\n      $('.a-js-truncate-2-sm-down').truncate({\r\n        lines: 3\r\n      });\r\n    } else {\r\n      $('.a-js-truncate-2-sm-down').truncate({\r\n        lines: 2\r\n      });\r\n    }\r\n  }, 1);\r\n\r\n  $(window).resize(function() {\r\n    // Max two lines for all screen sizes\r\n    $('.a-js-truncate-2').truncate('collapse');\r\n    $('.a-js-truncate-2').truncate('update');\r\n\r\n    // Max two lines for screen sizes less than 768\r\n    if (window.innerWidth < 768) {\r\n      $('.a-js-truncate-2-sm-down').truncate('collapse');\r\n      $('.a-js-truncate-2-sm-down').truncate('update');\r\n    } else {\r\n      $('.a-js-truncate-2-sm-down').truncate('expand');\r\n    }\r\n  });\r\n\r\n  $('.a-collapsePanel-body').on('shown.bs.collapse', function() {\r\n    var el = $(this).siblings('.a-collapsePanel-heading').find('.a-js-truncate-2-sm-down');\r\n    if (window.innerWidth < 768) {\r\n      el.truncate('expand');\r\n    }\r\n  });\r\n\r\n  $('.a-collapsePanel-body').on('hide.bs.collapse', function() {\r\n    var el = $(this).siblings('.a-collapsePanel-heading').find('.a-js-truncate-2-sm-down');\r\n    if (window.innerWidth < 768) {\r\n      el.truncate('collapse');\r\n    }\r\n  });\r\n};\r\n","/* globals AltinnLoader:true */\r\n\r\nAltinnLoader = {\r\n  addLoader: function($target) {\r\n    if ($target.find('.loader-container').length === 0) {\r\n      $target.prepend('<div class=\"loader-container\"><div class=\"loader loader-ellipsis\"></div></div>');\r\n    }\r\n    $('button.a-modal-back').attr('disabled', true);\r\n    $('button.a-modal-close').attr('disabled', true);\r\n  },\r\n\r\n  removeLoader: function($target) {\r\n    $target.find('.loader-container').remove();\r\n    $('button.a-modal-back').attr('disabled', false);\r\n    $('button.a-modal-close').attr('disabled', false);\r\n  }\r\n};\r\n","function showPassword(src, target) {\r\n  var pwd = $('#' + target);\r\n  if (pwd.attr('type') === 'text') {\r\n    pwd.attr('type', 'password');\r\n    $(src).children('.hide-password-text').hide();\r\n    $(src).children('.show-password-text').show();\r\n  } else {\r\n    pwd.attr('type', 'text');\r\n    $(src).children('.hide-password-text').show();\r\n    $(src).children('.show-password-text').hide();\r\n\r\n    setTimeout(function() {\r\n      pwd.attr('type', 'password');\r\n      $(src).children('.hide-password-text').hide();\r\n      $(src).children('.show-password-text').show();\r\n    }, 15000);\r\n  }\r\n}\r\n\r\nfunction setVisibility(passwordField, showPasswordId) {\r\n  var password = $(passwordField);\r\n  if (password.val().length > 0) {\r\n    $('#' + showPasswordId).removeClass('d-none');\r\n  } else {\r\n    $('#' + showPasswordId).addClass('d-none');\r\n  }\r\n}\r\n","/* globals currentRequest, popoverLocalInit, AltinnModal */\r\n/* globals AltinnModal:true, AltinnLoader */\r\nAltinnModal = {\r\n  closeModal: function(settings) {\r\n    $('body').removeClass('a-modal-background-error a-displayNav');\r\n    $('body').removeClass('a-modal-background-success');\r\n    $(settings.target).modal('hide');\r\n    $('body').append($('.a-stickyHelp-container'));\r\n  },\r\n\r\n  loadModal: function(settings) {\r\n    var currentRequest = $.ajax({\r\n      url: settings.url,\r\n      beforeSend: function() {\r\n        if (typeof currentRequest !== 'undefined') {\r\n          currentRequest.abort();\r\n        }\r\n\r\n        AltinnLoader.addLoader($('body'));\r\n      },\r\n      data: settings.data\r\n    }).always(function() {\r\n    }).done(function(data) {\r\n      var modalPage = $('<div/>', {\r\n        class: 'modalPage',\r\n        html: data\r\n      });\r\n      var page = $('<div/>', {\r\n        class: 'a-page a-current-page',\r\n        data: {\r\n          pageIndex: 1,\r\n          isSuccess: settings.isSuccess,\r\n          isError: settings.isError,\r\n          showModalNav: settings.showModalNav\r\n        },\r\n        html: modalPage\r\n      });\r\n\r\n      $('body').removeClass('a-modal-background-error a-displayNav');\r\n      $('body').removeClass('a-modal-background-success');\r\n\r\n      // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\r\n      //   goToModalHeader();\r\n      // }\r\n\r\n      $(settings.target + ' .a-modal-content-target').append(page);\r\n      $(settings.target).trigger('loaded.altinn.modal');\r\n      $(settings.target).find('.a-current-page').first().data().enableDirtyPopover = settings.enableDirtyPopover;\r\n\r\n      // Initialize with backdrop: static to prevent modal from closing when clicking outside,\r\n      // and keyboard: false to prevent ESC from closing the modal\r\n      $(settings.target).modal({\r\n        backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n\r\n      $(settings.target).on('hidden.bs.modal', function() {\r\n        $(settings.target + ' .a-modal-content-target').empty();\r\n        $(settings.target).attr('aria-hidden', true);\r\n        $('#altinnModal').siblings('.row').removeClass('d-none');\r\n      });\r\n\r\n      $(settings.target).on('shown.bs.modal', function() {\r\n        $(settings.target).removeAttr('aria-hidden');\r\n        $('#altinnModal').siblings('.row').addClass('d-none');\r\n      });\r\n      popoverLocalInit();\r\n\r\n      if (settings.isError) {\r\n        $('body').addClass('a-modal-background-error');\r\n        if (settings.showModalNav) {\r\n          $('body').addClass('a-displayNav');\r\n        }\r\n      } else if (settings.isSuccess) {\r\n        $('body').addClass('a-modal-background-success');\r\n      }\r\n\r\n      AltinnLoader.removeLoader($('body'));\r\n      // causes issues in IE11 (blinking quickhelp when modal is open)\r\n      // $(settings.target).on('transitionend', function() {\r\n      // $(settings.target).append($('.a-stickyHelp-container'));\r\n      // });\r\n    });\r\n  },\r\n\r\n  nextModalPageWithContent: function(settings) {\r\n    var current;\r\n    var modalPage = $('<div/>', {\r\n      class: 'modalPage',\r\n      html: settings.content\r\n    });\r\n\r\n    var existingPages;\r\n    var newPage;\r\n    var newPageIndex;\r\n\r\n    existingPages = $(settings.target + ' :data(page-index)');\r\n\r\n    if (settings.clearHistory) {\r\n      newPageIndex = 1;\r\n    } else {\r\n      newPageIndex = existingPages.length + 1;\r\n    }\r\n\r\n    if (settings.clearHistory) {\r\n      $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\r\n    }\r\n\r\n    newPage = $('<div/>', {\r\n      class: 'a-page a-next-page',\r\n      data: {\r\n        pageIndex: newPageIndex,\r\n        isSuccess: settings.isSuccess,\r\n        isError: settings.isError,\r\n        showModalNav: settings.showModalNav\r\n      },\r\n      html: modalPage\r\n    });\r\n\r\n    // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\r\n    //   goToModalHeader();\r\n    // }\r\n\r\n    $(settings.target + ' .a-modal-content-target').append(newPage);\r\n    $(settings.target).trigger('loaded.altinn.modal');\r\n\r\n    $(settings.target).animate({\r\n      scrollTop: 0\r\n    }, 20);\r\n\r\n    current = $(settings.target + ' .a-current-page');\r\n\r\n    setTimeout(function() {\r\n      $('body').removeClass('a-modal-background-error a-displayNav');\r\n      $('body').removeClass('a-modal-background-success');\r\n\r\n      current.removeClass('a-current-page').addClass('a-previous-page');\r\n      newPage.removeClass('a-next-page').addClass('a-current-page');\r\n      $(newPage).data().enableDirtyPopover = settings.enableDirtyPopover;\r\n\r\n      if (settings.isError) {\r\n        $('body').addClass('a-modal-background-error');\r\n        if (settings.showModalNav) {\r\n          $('body').addClass('a-displayNav');\r\n        }\r\n      } else if (settings.isSuccess) {\r\n        $('body').addClass('a-modal-background-success');\r\n      }\r\n    }, 0);\r\n\r\n    current.on('transitionend', function() {\r\n      if (settings.clearHistory) {\r\n        $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\r\n      } else {\r\n        current.hide().off();\r\n      }\r\n    });\r\n\r\n    popoverLocalInit();\r\n  },\r\n\r\n  nextModalPage: function(settings) {\r\n    var currentRequest = $.ajax({\r\n      url: settings.url,\r\n      beforeSend: function() {\r\n        if (typeof currentRequest !== 'undefined') {\r\n          currentRequest.abort();\r\n        }\r\n        AltinnLoader.addLoader($(settings.target).find('.a-current-page .a-modal-body'));\r\n      },\r\n      data: settings.data\r\n    }).always(function() {\r\n    }).done(function(data) {\r\n      var current;\r\n      var modalPage = $('<div/>', {\r\n        class: 'modalPage',\r\n        html: data\r\n      });\r\n\r\n      var existingPages;\r\n      var newPage;\r\n      var newPageIndex;\r\n\r\n      existingPages = $(settings.target + ' :data(page-index)');\r\n\r\n      if (settings.clearHistory) {\r\n        newPageIndex = 1;\r\n      } else {\r\n        newPageIndex = existingPages.length + 1;\r\n      }\r\n\r\n      if (settings.clearHistory) {\r\n        $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\r\n      }\r\n\r\n      newPage = $('<div/>', {\r\n        class: 'a-page a-next-page',\r\n        data: {\r\n          pageIndex: newPageIndex,\r\n          isSuccess: settings.isSuccess,\r\n          isError: settings.isError,\r\n          showModalNav: settings.showModalNav\r\n        },\r\n        html: modalPage\r\n      });\r\n\r\n      // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\r\n      //   goToModalHeader();\r\n      // }\r\n\r\n      $(settings.target + ' .a-modal-content-target').append(newPage);\r\n      $(settings.target).trigger('loaded.altinn.modal');\r\n\r\n      $(settings.target).animate({\r\n        scrollTop: 0\r\n      }, 20);\r\n\r\n      current = $(settings.target + ' .a-current-page');\r\n\r\n      setTimeout(function() {\r\n        $('body').removeClass('a-modal-background-error a-displayNav');\r\n        $('body').removeClass('a-modal-background-success');\r\n\r\n        current.removeClass('a-current-page').addClass('a-previous-page');\r\n        newPage.removeClass('a-next-page').addClass('a-current-page');\r\n        $(newPage).data().enableDirtyPopover = settings.enableDirtyPopover;\r\n\r\n        if (settings.isError) {\r\n          $('body').addClass('a-modal-background-error');\r\n          if (settings.showModalNav) {\r\n            $('body').addClass('a-displayNav');\r\n          }\r\n        } else if (settings.isSuccess) {\r\n          $('body').addClass('a-modal-background-success');\r\n        }\r\n      }, 0);\r\n\r\n      current.on('transitionend', function() {\r\n        if (settings.clearHistory) {\r\n          $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\r\n        } else {\r\n          current.hide().off();\r\n        }\r\n\r\n        AltinnLoader.removeLoader(current.find('.a-modal-body'));\r\n      });\r\n\r\n      popoverLocalInit();\r\n    });\r\n  },\r\n\r\n  previousModalPage: function(settings) {\r\n    var current;\r\n    var allPages;\r\n    var previous;\r\n    var pagesToPop;\r\n    var isError;\r\n    var showModalNav;\r\n    var isSuccess;\r\n\r\n    if (!settings.pagesToPop) {\r\n      pagesToPop = 1;\r\n    } else {\r\n      pagesToPop = settings.pagesToPop;\r\n    }\r\n\r\n    if ($(settings.target + ' .a-current-page').data('page-index') - pagesToPop <= 0) {\r\n      $(settings.target).one('hidden.bs.modal', function() {\r\n        $('body').removeClass('a-modal-background-error a-displayNav');\r\n        $('body').removeClass('a-modal-background-success');\r\n      });\r\n\r\n      $(settings.target).modal('hide');\r\n      return;\r\n    }\r\n\r\n    current = $(settings.target + ' .a-current-page');\r\n    allPages = $(settings.target + ' :data(page-index)');\r\n    previous = allPages.filter(function() {\r\n      return $(this).data('page-index') === allPages.length - 1;\r\n    });\r\n\r\n    previous.show();\r\n    isError = $(previous).data().isError;\r\n    showModalNav = $(previous).data().showModalNav;\r\n    isSuccess = $(previous).data().isSuccess;\r\n\r\n    current.addClass('a-next-page');\r\n    current.removeClass('a-current-page');\r\n\r\n    // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\r\n    //   goToModalHeader();\r\n    // }\r\n\r\n    setTimeout(function() {\r\n      $('body').removeClass('a-modal-background-error a-displayNav');\r\n      $('body').removeClass('a-modal-background-success');\r\n\r\n      previous.addClass('a-current-page').removeClass('a-previous-page');\r\n\r\n      if (isError) {\r\n        $('body').addClass('a-modal-background-error');\r\n        if (showModalNav) {\r\n          $('body').addClass('a-displayNav');\r\n        }\r\n      } else if (isSuccess) {\r\n        $('body').addClass('a-modal-background-success');\r\n      }\r\n    }, 0);\r\n\r\n    current.on('transitionend', function() {\r\n      var previousPages = allPages.filter(function() {\r\n        return $(this).data('page-index') > allPages.length - pagesToPop;\r\n      });\r\n      previousPages.remove();\r\n    });\r\n  },\r\n\r\n  setCurrentPageIsDirty: function(target, state) {\r\n    $(target).find('.a-current-page').first().data().isDirty = state;\r\n  },\r\n\r\n  init: function() {\r\n    var that = this;\r\n    $('body').on('click', '[data-toggle=\"altinn-modal\"]', function() {\r\n      var $source = $(this);\r\n      if ($source.data().action === 'load') {\r\n        that.loadModal({\r\n          url: $source.data().url,\r\n          target: $source.data().target,\r\n          enableDirtyPopover: $source.data().enableDirtyPopover\r\n        });\r\n      } else if ($source.data().action === 'next') {\r\n        that.nextModalPage({ url: $source.data().url,\r\n          target: $source.data().target,\r\n          isSuccess: $source.data().isSuccess,\r\n          isError: $source.data().isError,\r\n          showModalNav: $source.data().showModalNav,\r\n          clearHistory: $source.data().clearHistory,\r\n          enableDirtyPopover: $source.data().enableDirtyPopover });\r\n      } else if ($source.data().action === 'back') {\r\n        that.previousModalPage({\r\n          target: $source.data().target,\r\n          pagesToPop: $source.data().pages\r\n        });\r\n      } else if ($source.data().action === 'close') {\r\n        that.closeModal({ target: $source.data().target });\r\n      }\r\n    });\r\n\r\n    $('body').on('click', '.a-modal-back', function() {\r\n      var $modal = $(this).closest('.a-modal');\r\n      if ($modal.find('.a-current-page').first().data().enableDirtyPopover\r\n        && $modal.find('.a-current-page').first().data().isDirty) {\r\n        $(this).popover('show');\r\n      } else {\r\n        that.previousModalPage({ target: '#' + $modal[0].id });\r\n      }\r\n    });\r\n\r\n    $('body').on('click', '.a-modal-close', function() {\r\n      var $modal = $(this).closest('.a-modal');\r\n      if ($modal.find('.a-current-page').first().data().enableDirtyPopover\r\n        && $modal.find('.a-current-page').first().data().isDirty) {\r\n        $(this).popover('show');\r\n      } else {\r\n        that.closeModal({ target: '#' + $modal[0].id });\r\n      }\r\n    });\r\n\r\n    $('body').on('click', '.a-js-modal-dirtyBackBtn', function() {\r\n      AltinnModal.previousModalPage({ target: '#' + $(this).closest('.a-modal')[0].id });\r\n      $('button[aria-describedby=' + $(this).parent().parent().attr('id') + ']').popover('hide');\r\n    });\r\n\r\n    $('body').on('click', '.a-js-modal-dirtyCancelBtn', function() {\r\n      $('button[aria-describedby=' + $(this).parent().parent().attr('id') + ']').popover('hide');\r\n    });\r\n\r\n    $('body').on('click', '.a-js-modal-dirtyCloseBtn', function() {\r\n      AltinnModal.closeModal({ target: '#' + $(this).closest('.a-modal')[0].id });\r\n      $('button[aria-describedby=' + $(this).parent().parent().attr('id') + ']').popover('hide');\r\n    });\r\n\r\n    function urlQuery(query) { // Parse current URL for query value\r\n      var _query = query.replace(/[[]/, '[').replace(/[\\]]/, '\\\\]');\r\n      var expr = '[\\\\?&]' + _query + '=([^&#]*)';\r\n      var regex = new RegExp(expr);\r\n      var results = regex.exec(window.location.href);\r\n      if (results !== null) {\r\n        return results[1];\r\n      }\r\n      return false;\r\n    }\r\n    if (urlQuery('form') === '1') {\r\n      AltinnModal.loadModal({\r\n        url: '/hjelp/kontaktskjema-for-hjelp/',\r\n        target: '#modal'\r\n      });\r\n    }\r\n  }\r\n};\r\n","/* globals $ */\r\nvar toggleFilter = function() {\r\n  $('.a-collapse-title').on('keyup', function(e) {\r\n    var key = e.which;\r\n    if (key === 13) {\r\n      e.stopImmediatePropagation(); e.stopPropagation(); e.preventDefault();\r\n      $(e.target).trigger('mouseup');\r\n    } else if (key === 9) {\r\n      if ($($(e.target).attr('data-target')).hasClass('show')) {\r\n        $($(e.target).attr('data-target')).find('.a-switch').eq(0)\r\n          .trigger('focus');\r\n      }\r\n    }\r\n  });\r\n};\r\n","/* globals currentRequest, AltinnQuickhelp */\r\n/* globals AltinnQuickhelp:true */\r\nAltinnQuickhelp = {\r\n  listeners: function(target) {\r\n    var that = this;\r\n    $('.a-stickyHelp-search').find('input').on('keyup', function(e) {\r\n      var keyCode = e.keyCode || e.which;\r\n      if (keyCode === 13 && encodeURIComponent($(this)[0].value).length > 0) {\r\n        that.nextquickhelpPage({\r\n          url: $('#a-stickyHelp').attr('data-api') +\r\n            encodeURIComponent($(this)[0].value) + '/' + $('html').attr('lang'),\r\n          target: target\r\n        });\r\n      }\r\n    });\r\n    $('.a-stickyHelp-search').find('button').on('click', function(e) {\r\n      if (encodeURIComponent($('.a-js-stickyhelpSearch')[0].value).length > 0) {\r\n        that.nextquickhelpPage({\r\n          url: $('#a-stickyHelp').attr('data-api') +\r\n            encodeURIComponent($('.a-js-stickyhelpSearch')[0].value) + '/' +\r\n            $('html').attr('lang'),\r\n          target: target\r\n        });\r\n      }\r\n    });\r\n  },\r\n  nextquickhelpPage: function(settings) {\r\n    var currentRequest = $.ajax({\r\n      url: settings.url,\r\n      beforeSend: function() {\r\n        if (typeof currentRequest !== 'undefined') {\r\n          currentRequest.abort();\r\n        }\r\n      }\r\n    }).done(function(data) {\r\n      var quickhelpPage = $('<div/>', { class: 'quickhelpPage', html: data });\r\n      var current; var existingPages; var newPage; var newPageIndex;\r\n      existingPages = $(settings.target + ' :data(page-index)');\r\n      newPageIndex = existingPages.length + 1;\r\n      newPage = $('<div/>', {\r\n        class: 'a-page a-next-page',\r\n        data: { 'page-index': newPageIndex },\r\n        html: quickhelpPage\r\n      });\r\n      $(settings.target + ' .a-stickyHelp-content-target').append(newPage);\r\n      $(settings.target).animate({ scrollTop: 0 }, 20);\r\n      current = $(settings.target + ' .a-current-page');\r\n      setTimeout(function() {\r\n        current.removeClass('a-current-page').addClass('a-previous-page');\r\n        newPage.removeClass('a-next-page').addClass('a-current-page');\r\n        $(newPage).data();\r\n      }, 0);\r\n      current.on('transitionend', function() {\r\n        if (settings.clearHistory) {\r\n          $(settings.target + ' :data(page-index)').not('.a-current-page')\r\n            .remove();\r\n        } else {\r\n          current.off();\r\n        }\r\n      });\r\n      $('#a-js-stickyHelp-back').addClass('d-block');\r\n    });\r\n  },\r\n  previousquickhelpPage: function(settings) {\r\n    var current; var allPages; var previous; var pagesToPop;\r\n    if (!settings.pagesToPop) {\r\n      pagesToPop = 1;\r\n    } else {\r\n      pagesToPop = settings.pagesToPop;\r\n    }\r\n    current = $(settings.target + ' .a-current-page');\r\n    allPages = $(settings.target + ' :data(page-index)');\r\n    previous = allPages.filter(function() {\r\n      return $(this).data('page-index') === allPages.length - 1;\r\n    });\r\n    previous.addClass('a-current-page').removeClass('a-next-page');\r\n    current.removeClass('a-current-page').addClass('a-next-page');\r\n    setTimeout(function() {\r\n      previous.addClass('a-current-page').removeClass('a-previous-page');\r\n    }, 0);\r\n    current.on('transitionend', function() {\r\n      var previousPages = allPages.filter(function() {\r\n        return $(this).data('page-index') > allPages.length - pagesToPop;\r\n      });\r\n      previousPages.remove();\r\n    });\r\n    if (allPages.length === 2) {\r\n      $('#a-js-stickyHelp-back').removeClass('d-block');\r\n    }\r\n  },\r\n  init: function() {\r\n    var that = this; that.listeners('#a-stickyHelp');\r\n    $('body').on('click', '[data-toggle=\"quickhelp\"]', function() {\r\n      var $source = $(this);\r\n      if ($source.data().action === 'next') {\r\n        that.nextquickhelpPage({\r\n          url: $source.data().url, target: $source.data().target\r\n        });\r\n      } else if ($source.data().action === 'back') {\r\n        that.previousquickhelpPage({\r\n          target: $source.data().target, pagesToPop: $source.data().pages\r\n        });\r\n      }\r\n    });\r\n    $('.a-current-page').data({ 'page-index': 1 });\r\n    $('.a-js-stickyHelpCategory')\r\n      .html($('#a-stickyHelp').find('.a-stickyHelp-content-target')\r\n        .attr('data-category')\r\n      );\r\n    $('.a-js-stickyHelpCategoryLink').attr('data-url', $('#a-stickyHelp')\r\n      .find('.a-stickyHelp-content-target').attr('data-url')\r\n    );\r\n    $('body').on('click', '.a-stickyHelp-open', function() {\r\n      if (!$('.a-js-stickyHelpFrame').attr('src')) {\r\n        $('.a-js-stickyHelpFrame')\r\n          .attr('src', $('.a-js-stickyHelpFrame').attr('data-src'));\r\n      }\r\n    });\r\n    if ($('.quickhelpPage').find('.a-text').length !== 0) {\r\n      $('.quickhelpPage').parent('.a-page').addClass('a-page-hasArticleInside');\r\n    }\r\n  }\r\n};\r\n","/* globals mobileNavigation */\r\nvar wasDark = $('header').hasClass('a-darkBackground');\r\nvar action = function(e) {\r\n  if ($(e.target).closest('.a-globalNav-main').length === 0 &&\r\n  $(e.target).closest('.navbar-toggler').length === 0) {\r\n    if ($('.a-globalNav-main').is(':visible')) {\r\n      $('.navbar-toggler').attr('data-jsexpanded', 'false');\r\n      $('.a-globalNav-main').hide();\r\n      $('body').css('background-color', '');\r\n      if (wasDark) {\r\n        $('header').addClass('a-darkBackground');\r\n        $('.a-globalNav-logo').find('img')\r\n          .attr('src', $('.a-globalNav-logo').find('img').attr('src').replace('blue', 'white'));\r\n      }\r\n      $('.a-page').children(':not(header)').removeClass('a-js-hidden');\r\n    }\r\n  } else if ($(e.target).closest('.navbar-toggler').length > 0) {\r\n    if ($('.a-globalNav-main').is(':visible')) {\r\n      $('.navbar-toggler').attr('data-jsexpanded', 'false');\r\n      $('.a-globalNav-main').hide();\r\n      $('body').css('background-color', '');\r\n      if (wasDark) {\r\n        $('header').addClass('a-darkBackground');\r\n        $('.a-globalNav-logo').find('img')\r\n          .attr('src', $('.a-globalNav-logo').find('img').attr('src').replace('blue', 'white'));\r\n      }\r\n      $('.a-page').children(':not(header)').removeClass('a-js-hidden');\r\n    } else {\r\n      $('.navbar-toggler').attr('data-jsexpanded', 'true');\r\n      $('.a-globalNav-main').show();\r\n      $('body').css('background-color', '#fff');\r\n      if (wasDark) {\r\n        $('header').removeClass('a-darkBackground');\r\n        $('.a-globalNav-logo').find('img')\r\n          .attr('src', $('.a-globalNav-logo').find('img').attr('src').replace('white', 'blue'));\r\n      }\r\n      $('.a-page').children(':not(header)').addClass('a-js-hidden');\r\n    }\r\n  }\r\n};\r\nfunction menuHandler() {\r\n  // enable tabbing and mouse click on mobile menu btn\r\n  if ($('body').width() < 768) {\r\n    $('body').on('click', action);\r\n  }\r\n}\r\nmenuHandler();\r\n$(window).on('resize', function() {\r\n  $('body').off('click', action);\r\n  menuHandler();\r\n});\r\n","var toggleInstant = function() {\r\n  $('.a-panelAccordion').on('click', '*[data-toggle=\"instant\"]', function() {\r\n    var $target = $(this.dataset.target);\r\n    if ($target.is(':visible')) {\r\n      $(this).attr('aria-expanded', false);\r\n      $target.hide();\r\n      $(this).removeClass('a-open');\r\n    } else {\r\n      $(this).attr('aria-expanded', true);\r\n      $target.show();\r\n      $(this).addClass('a-open');\r\n    }\r\n  });\r\n};\r\n","/* globals $ */\r\nvar mobileNavigation = function() {\r\n  $('.a-globalNav .dropdown').on('show.bs.dropdown', function(e) {\r\n    var that = this;\r\n    setTimeout(function() {\r\n      $(that).find('.a-dropdown-languages').addClass('expand');\r\n      $(that).find('.a-dropdown-languages a').removeAttr('tabindex');\r\n      $(that).find('.a-dropdown-languages a').removeAttr('aria-hidden');\r\n    }, 0);\r\n  });\r\n\r\n  $('.a-globalNav .dropdown').on('hide.bs.dropdown', function(e) {\r\n    $(this).find('.a-dropdown-languages').removeClass('expand');\r\n    $(this).find('.a-dropdown-languages a').attr('tabindex', '-1');\r\n    $(this).find('.a-dropdown-languages a').attr('aria-hidden', 'true');\r\n  });\r\n};\r\n","/* globals\r\n  setupExpandContent\r\n*/\r\n$('body').on('show.bs.collapse', '.a-collapsePanel-body', function(e) {\r\n  var that = this;\r\n  if ($(e.target).hasClass('a-collapsePanel-body')) {\r\n    setTimeout(function() {\r\n      var $collapsePanelHeader = $(that).siblings('.a-js-index-heading').first();\r\n      var $msgIconWrapper = $collapsePanelHeader.find('.a-inboxHeadingContent')\r\n        .find('.a-msgIconSecondary')\r\n        .closest('.a-msgIconWrapper');\r\n\r\n      $msgIconWrapper.find('.reg')\r\n        .hide()\r\n        .siblings('.a-msgIconSecondary')\r\n        .show();\r\n\r\n      $msgIconWrapper.find('span').attr('aria-hidden', true);\r\n      $msgIconWrapper.find('span:last-of-type').removeAttr('aria-hidden');\r\n\r\n      $('.a-collapsePanel').removeClass('expanded');\r\n      $(that).closest('.a-collapsePanel').addClass('expanded');\r\n      $('.a-js-index-heading').addClass('dim');\r\n      $('.a-collapsePanel.expanded').find('.a-js-index-heading').removeClass('dim');\r\n      setupExpandContent();\r\n    }, 0);\r\n  }\r\n});\r\n\r\n$('body').on('hide.bs.collapse', '.a-collapsePanel-body', function(e) {\r\n  var that = this;\r\n  if ($(e.target).hasClass('a-collapsePanel-body')) {\r\n    setTimeout(function() {\r\n      var $collapsePanelHeader = $(that).siblings('.a-js-index-heading').first();\r\n      $collapsePanelHeader.find('.a-inboxHeadingContent').removeClass('a-msgUnread');\r\n      $(that).closest('.a-collapsePanel').removeClass('expanded');\r\n      if ($('.a-collapsePanel.expanded').length === 0) {\r\n        $('.a-js-index-heading').removeClass('dim');\r\n      } else {\r\n        $collapsePanelHeader.addClass('dim');\r\n      }\r\n    }, 0);\r\n  }\r\n});\r\n\r\n$('.a-js-collapseInboxMessage').click(function() {\r\n  $('div.card.a-accordion-card.a-collapsePanel.expanded a[data-toggle=\"collapse\"]').click();\r\n});\r\n","var setupOnKeypress = function() {\r\n  $('body').on('keydown', '.a-clickable, .a-selectable', function(e) {\r\n    var key = e.which;\r\n    if ($(e.target).hasClass('a-clickable') || $(e.target).hasClass('a-selectable')) {\r\n      if (key === 13) {\r\n        $(this).click();\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  });\r\n};\r\n","var compareTo = function(firstItem, secondItem) {\r\n  var first;\r\n  var second;\r\n  if (firstItem === undefined && secondItem === undefined) {\r\n    return 0;\r\n  }\r\n  if (firstItem === undefined) {\r\n    return 1;\r\n  }\r\n  if (secondItem === undefined) {\r\n    return -1;\r\n  }\r\n\r\n  first = firstItem.toString();\r\n  second = secondItem.toString();\r\n  if (first < second) {\r\n    return -1;\r\n  }\r\n\r\n  if (first > second) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n};\r\n","// Select the node that will be observed for mutations\r\nvar targetNode = document.getElementsByClassName('navbar-toggler')[0];\r\n\r\n// Options for the observer (which mutations to observe)\r\nvar config = { attributes: true, childList: true };\r\n\r\nvar callback = function(mutationsList) {\r\n  mutationsList.forEach(function(mutation) {\r\n    if ($(mutation.target).attr('data-jsexpanded') === 'false') {\r\n      $('.a-login-container').css('display', '');\r\n    } else {\r\n      $('.a-login-container').css('display', 'none');\r\n    }\r\n  });\r\n};\r\n\r\n// Create an observer instance linked to the callback function\r\nvar observer = new MutationObserver(callback);\r\n\r\n// Start observing the target node for configured mutations\r\ntry {\r\n  observer.observe(targetNode, config);\r\n} catch (e) {\r\n  //\r\n}\r\n\r\n\r\n$('button.a-personSwitcher').on('click', function() {\r\n  if ($('button.navbar-toggler').attr('data-jsexpanded') === 'true') {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    $('button.navbar-toggler').trigger('click');\r\n  }\r\n});\r\n\r\n$('.a-dropdown-personswitchList').on('click', 'button[data-toggle=\"collapse\"]', function(event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n  $($(this).data('target')).collapse('toggle');\r\n});\r\n\r\n// For setting the background-color when favorite star is hovered\r\n$('.a-listWithSubLevels').children().hover(function() {\r\n  if (!$(this).parent().find('button.a-btn-shadow-large').is(':disabled') && ($(this).is('.a-favourite') || $(this).is('.a-btn-shadow-large'))) {\r\n    $(this).parent().find('button.a-btn-shadow-large').css('background', '#CFF0FF');\r\n    $(this).parent().find('button.a-btn-shadow-large.a-bgGreyLight').css('background', '#E2E2E2');\r\n  }\r\n},\r\nfunction() {\r\n  if (!$(this).parent().find('button.a-btn-shadow-large').is(':disabled') && ($(this).is('.a-favourite') || $(this).is('.a-btn-shadow-large'))) {\r\n    $(this).parent().find('button.a-btn-shadow-large').css('background', '#E3F7FF');\r\n    $(this).parent().find('button.a-btn-shadow-large.a-bgGreyLight').css('background', '#EFEFEF');\r\n  }\r\n});\r\n","var setValidatorSettings = function() {\r\n  var defaultOptions = {\r\n    ignore: ':hidden, .ignoreValidation',\r\n    highlight: function(element, errorClass, validClass) {\r\n      $(element).closest('.form-group').addClass(errorClass);\r\n    },\r\n    unhighlight: function(element, errorClass, validClass) {\r\n      $(element).closest('.form-group').removeClass(errorClass);\r\n    },\r\n    focusInvalid: false\r\n  };\r\n  $.validator.setDefaults(defaultOptions);\r\n  $.validator.unobtrusive.options = {\r\n    errorClass: 'has-error'\r\n  };\r\n};\r\n","/* eslint vars-on-top: 0 */\r\n/* globals $ */\r\nvar popoverLocalInit = function() {\r\n  var options = {\r\n    html: true,\r\n    placement: function(context, source) {\r\n      var position = $(source).offset();\r\n      $(context).addClass($(source).attr('data-popover-class'));\r\n      if ($(source).hasClass('a-js-popoverBig')) {\r\n        return 'bottom';\r\n      }\r\n      if (position.left < 125) {\r\n        return 'right';\r\n      }\r\n      if (position.left > ($(document).width() - $(source).width() - 125)) {\r\n        return 'left';\r\n      }\r\n      return 'bottom';\r\n    },\r\n    content: function() {\r\n      if ($(this).attr('data-popover-content')) {\r\n        return $('#' + $(this).data('popover-content')).html();\r\n      }\r\n      return false;\r\n    },\r\n    template: '<div class=\"popover\" role=\"popover\" tabindex=\"0\"><div class=\"arrow\"></div><div class=\"popover-body\"></div></div>'\r\n  };\r\n\r\n  $('[data-toggle=\"popover\"]').popover(options);\r\n\r\n  $('.a-js-togglePopoverIcons').each(function() {\r\n    // $(this).find('i').eq(1).hide();\r\n    $(this).find('.a-js-popoverIconExpanded').hide();\r\n  });\r\n\r\n  $('.a-js-popoverIconExpanded').on('click', function() {\r\n    $('.a-js-popoverIconExpanded').hide();\r\n    $('.a-js-popoverIconInitial').show();\r\n    // $(this).hide();\r\n    // $('.a-js-popoverIconInitial').show();\r\n  });\r\n  $('.a-js-popoverIconInitial').on('click', function() {\r\n    $(this).hide();\r\n    $(this).parent().find('.a-js-popoverIconExpanded').show();\r\n  });\r\n};\r\n\r\nvar forceFocusTriggerElement;\r\nvar popoverGlobalInit = function() {\r\n  $('[data-toggle=\"dropdown\"]').on('click', function(e) {\r\n    if (window.innerWidth < 992) {\r\n      $('.a-dropdown-overflow-menu-right').removeClass('dropdown-menu-right');\r\n    } else {\r\n      $('.a-dropdown-overflow-menu-right').addClass('dropdown-menu-right');\r\n    }\r\n  });\r\n\r\n  $('body').on('show.bs.popover', '[data-toggle=\"popover\"].a-js-tabable-popover', function(e) {\r\n    var triggerElement = this;\r\n    $(triggerElement).closest('.a-modal').scrollTop(0);\r\n  });\r\n\r\n  $('body').on('shown.bs.popover', '[data-toggle=\"popover\"].a-js-tabable-popover', function(e) {\r\n    var triggerElement = this;\r\n    setTimeout(function() {\r\n      $(triggerElement).after($($(triggerElement).data('bs.popover').tip));\r\n      $(triggerElement).closest('.a-modal').one('scroll', function() {\r\n        $('[data-toggle=\"popover\"]').popover('hide');\r\n      });\r\n    }, 0);\r\n  });\r\n\r\n  $('body').on('shown.bs.popover', '[data-toggle=\"popover\"].a-js-popover-forceFocus', function(e) {\r\n    $('body').append($('<button class=\"sr-only a-js-popoverTrick\">ignoreme</button>'));\r\n    forceFocusTriggerElement = this;\r\n\r\n    /*\r\n      This is a keyboard trap code\r\n      which prevents the user from exiting the \"popover\" dialog with tabbing.\r\n      ESC will close the \"popover\" dialog.\r\n    */\r\n\r\n    // Find popover-warning\r\n    var popoverWarning = $('.popover-warning');\r\n\r\n    // Find all focusable children\r\n    var focusableElementsString = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex=\"0\"], [contenteditable]';\r\n    // var focusableElements = popover.querySelectorAll(focusableElementsString);\r\n    var focusableElements = $(popoverWarning).find(focusableElementsString);\r\n\r\n    // If there are focusable elements, make keyboardtrap\r\n    if (focusableElements.length) {\r\n      // Convert NodeList to Array\r\n      focusableElements = Array.prototype.slice.call(focusableElements);\r\n\r\n      var firstTabStop = focusableElements[0];\r\n      var lastTabStop = focusableElements[focusableElements.length - 1];\r\n\r\n      // Focus first child, and scroll to current position\r\n      var position = $(window).scrollTop();\r\n      firstTabStop.focus({ preventScroll: true });\r\n      $(window).scrollTop(position);\r\n\r\n      $(popoverWarning).keydown(function(key) {\r\n        if (key.keyCode === 9) {\r\n          // Shift + Tab\r\n          if (key.shiftKey) {\r\n            if (document.activeElement === firstTabStop) {\r\n              key.preventDefault();\r\n              lastTabStop.focus();\r\n            }\r\n          // TAB\r\n          } else {\r\n            if (document.activeElement === lastTabStop) { // eslint-disable-line\r\n              key.preventDefault();\r\n              firstTabStop.focus();\r\n            }\r\n          }\r\n        } else if (key.keyCode === 27) {\r\n          // Escape\r\n          $('[data-toggle=\"popover\"]').popover('hide');\r\n          $(forceFocusTriggerElement).focus();\r\n        }\r\n      });\r\n\r\n      // if cancel/avbryt pressed with Enter, hide popover and focus on trigger\r\n      $(lastTabStop).keydown(function(key) {\r\n        if (key.keyCode === 13) {\r\n          // Enter\r\n          key.preventDefault();\r\n          $('[data-toggle=\"popover\"]').popover('hide');\r\n          $(forceFocusTriggerElement).focus();\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  $('body').on('hidden.bs.popover', '[data-toggle=\"popover\"].a-js-popover-forceFocus', function(e) {\r\n    $('body').find('.a-js-popoverTrick').remove();\r\n  });\r\n\r\n  // hides popover when the checkbutton is checked\r\n  $('body').on('focus', '[data-toggle=\"popover\"].sr-only', function(e) {\r\n    if ($(this).is(':checked')) {\r\n      $(this).popover('hide');\r\n    } else {\r\n      $(this).popover('show');\r\n    }\r\n  });\r\n\r\n  // show/hide popover on checkbutton change\r\n  $('body').on('change', 'a-switch[data-toggle=popover]', function() {\r\n    if ($(this).is(':checked')) {\r\n      $(this).popover('hide');\r\n    } else {\r\n      $(this).popover('show');\r\n    }\r\n  });\r\n\r\n  // Hide all existing popovers when opening a new popover\r\n  $('body').on('click', '[data-toggle=\"popover\"]', function(e) {\r\n    $('[data-toggle=\"popover\"]').not(this).popover('hide');\r\n  });\r\n\r\n  // Hide all existing popovers when focusing a new element\r\n  // which is not the open popover or any of its content\r\n  $('body').on('blur', '[data-toggle=\"popover\"], .popover *', function(e) {\r\n    setTimeout(function() {\r\n      var $focused = $(':focus');\r\n      if ((($focused.length !== 0 || forceFocusTriggerElement)\r\n        && !$focused.hasClass('popover')\r\n        && !$focused.parents('.popover').length >= 1) || $focused.hasClass('a-js-popoverTrick')) {\r\n        // disable blur when in modal to allow use of non-original scrollbar\r\n        if ($('.modal.show').length > 0) {\r\n          $('.popover-big[data-toggle=\"popover\"]').popover('hide');\r\n        }\r\n      }\r\n    }, 0);\r\n  });\r\n\r\n  // Hide popovers when clicking on something else than the trigger element\r\n  // and the popover itself\r\n  $('body').on('click', function(e) {\r\n    if ($(e.target).data('toggle') !== 'popover' && $(e.target).parents('[data-toggle=\"popover\"]').length === 0 && $(e.target).parents('.popover.show').length === 0) {\r\n      $('[data-toggle=\"popover\"]').popover('hide');\r\n      forceFocusTriggerElement = false;\r\n      $(this).parent().find('.a-js-popoverIconInitial').show();\r\n      $(this).parent().find('.a-js-popoverIconExpanded').hide();\r\n    }\r\n  });\r\n\r\n  function resetTranslate() {\r\n    $('.popover-big').attr('style', $('.popover-big').attr('style').replace(/translateX\\(.*?\\)/, 'translateX(0px)'));\r\n  }\r\n\r\n  function adjustBig() {\r\n    var modalHeight;\r\n    var padding;\r\n    if ($('.popover-big').length > 0) {\r\n      if ($('.modal.show').length > 0) {\r\n        // Add padding to make sure modal is big enough to contain popover\r\n        modalHeight = $('.modal-dialog').height() + $('.modalPage:visible').height();\r\n        padding = ($('.popover').offset().top + $('.modal').scrollTop() + $('.popover').height() + 5) - modalHeight;\r\n        $('.modalPage:visible').css('padding-bottom', padding + 'px');\r\n        // tranlate is somehow added by Bootstrap later when in modal??\r\n        setTimeout(resetTranslate, 0);\r\n      } else {\r\n        resetTranslate();\r\n      }\r\n    }\r\n  }\r\n\r\n  $('body').on('shown.bs.popover', '.a-js-persistPopover', function() {\r\n    $('.arrow').html('<style>.popover-big:after { left: ' + ($(this).offset().left + 10.5) + 'px !important; }</style>');\r\n    $('html, body').animate({\r\n      scrollTop: $('.a-js-persistPopover').offset().top - 50\r\n    }, 250);\r\n\r\n    adjustBig();\r\n  });\r\n\r\n  // clean up modal page fix\r\n  $('body').on('hidden.bs.popover', 'a-js-persistPopover', function(e) {\r\n    $('.modalPage').css('padding-bottom', '0px');\r\n  });\r\n\r\n  $(window).scroll(adjustBig);\r\n  $('.modal').scroll(adjustBig);\r\n  $(window).resize(adjustBig);\r\n};\r\n","var setupExpandContent = function() {\r\n  var expandContent = function() {\r\n    $($(this).data('target')).addClass('a-expanded');\r\n    $(this).hide();\r\n  };\r\n\r\n  $('*[data-toggle=\"altinn-expand\"]').each(function() {\r\n    var targetHeight;\r\n    var $target = $($(this).data('target'));\r\n    $target.removeClass('a-expandable-content');\r\n    targetHeight = $target.outerHeight();\r\n    $(this).off('click', expandContent);\r\n    if (targetHeight > 320) {\r\n      $target.addClass('a-expandable-content');\r\n      $target.removeClass('a-expanded');\r\n      $(this).on('click', expandContent);\r\n      $(this).show();\r\n    } else {\r\n      $(this).hide();\r\n    }\r\n  });\r\n};\r\n","/* globals enableIOS11Fix, disableIOS11Fix, iOS11BugWorkAround */\r\n\r\nvar enableIOS11Fix = function() {\r\n  // We disable scrolling by hiding everything not in view\r\n  document.body.style.overflow = 'hidden';\r\n  document.body.style.position = 'fixed';\r\n  // It seems we don't need to set these, but I'm leaving there here for now\r\n  // Should be reversed in the disableIOS11Fix function if we enable them\r\n  // document.body.style.height = '100%';\r\n  // document.body.style.width = '100%';\r\n};\r\n\r\nvar disableIOS11Fix = function() {\r\n  document.body.style.overflow = 'auto';\r\n  document.body.style.position = 'static';\r\n};\r\n\r\nvar isAffectedPlatform = function() {\r\n  // Needs to be updated if new versions are affected\r\n  var ua = navigator.userAgent;\r\n  var iOS = /iPad|iPhone|iPod/.test(ua);\r\n  var iOS11 = /OS 11_/.test(ua);\r\n\r\n  return (iOS && iOS11);\r\n};\r\n\r\nvar iOS11BugWorkAround = function() {\r\n  // Detect iOS 11_x affected by cursor position bug\r\n  // Bug report: https://bugs.webkit.org/show_bug.cgi?id=176896\r\n  if (isAffectedPlatform()) {\r\n    // This should run in the parent page only, not in the modal\r\n    if ($('body.a-stickyHelp-body').length === 0) {\r\n      // We enable the fix only when the help button is clicked/tapped\r\n      $('.a-stickyHelp-open').on('click', function() {\r\n        enableIOS11Fix();\r\n      });\r\n    }\r\n\r\n    // This should be running inside the iframe\r\n    $('.a-stickyHelp-close').on('click', function() {\r\n      // When the close button in the sticky help window is clicked/tapped\r\n      // we disable the fix, otherwise the page will not scroll\r\n      window.parent.disableIOS11Fix();\r\n    });\r\n  }\r\n};\r\n\r\n","/* globals $ */\r\nvar contactForm = function() {\r\n  $('body.a-stickyHelp-body').on('click', '#contact-form-trigger', function() {\r\n    var ScontactFormLink;\r\n    var $closeButton;\r\n\r\n    if (window.parent.$) {\r\n      ScontactFormLink = window.parent.$('#contact-form-link');\r\n      $closeButton = window.parent.$('.a-stickyHelp-close');\r\n      if (ScontactFormLink.length > 0) {\r\n        ScontactFormLink.click();\r\n        $closeButton.click();\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n};\r\n","/*\r\n  globals\r\n  AltinnDropdown,\r\n  AltinnModal,\r\n  AltinnQuickhelp,\r\n  addListExpandHandler,\r\n  cardsToggle,\r\n  codeLookup,\r\n  contactForm,\r\n  feedbackToggle,\r\n  formatOrgNr,\r\n  handleFocus,\r\n  iOS11BugWorkAround,\r\n  listenForAttachmentChanges,\r\n  mobileNavigation,\r\n  nameChecker,\r\n  onConfirmDeletionClick,\r\n  onFileInputChange,\r\n  popoverGlobalInit,\r\n  popoverLocalInit,\r\n  setupAddRightsHandler,\r\n  setupExpandContent,\r\n  setupFormValidation,\r\n  setupListRowSelect,\r\n  setupOnKeypress,\r\n  setupSelectableCheckbox,\r\n  setupTruncateLines,\r\n  setValidatorSettings,\r\n  toggleFilter,\r\n  toggleInstant,\r\n  toggleSwitch,\r\n  truncateBoxButtonNames,\r\n  window,\r\n*/\r\nwindow.infoportalInit = function() {\r\n  AltinnModal.init();\r\n  AltinnDropdown.init();\r\n  AltinnQuickhelp.init();\r\n  addListExpandHandler();\r\n  contactForm();\r\n  feedbackToggle();\r\n  handleFocus();\r\n  iOS11BugWorkAround();\r\n  listenForAttachmentChanges();\r\n  mobileNavigation();\r\n  popoverGlobalInit();\r\n  popoverLocalInit();\r\n  setupExpandContent();\r\n  setupFormValidation();\r\n  setupOnKeypress();\r\n  setupSelectableCheckbox();\r\n  setupTruncateLines();\r\n  setValidatorSettings();\r\n  toggleFilter();\r\n  toggleInstant();\r\n\r\n  $.fn.modal.Constructor.prototype._enforceFocus = function() {\r\n    $(document)\r\n      .off('focusin.bs.modal')\r\n      .on('focusin.bs.modal', $.proxy(function(event) {\r\n        if (document !== event.target &&\r\n            this._element !== event.target &&\r\n            !$(this._element).has(event.target).length\r\n            && !$(event.target).hasClass('popover')\r\n            && !$(event.target).closest('.popover').length > 0) {\r\n          this._element.focus();\r\n        }\r\n      }, this));\r\n  };\r\n  function setupForm1() {\r\n    $('body').off('focus', '#contactForm', setupForm1);\r\n    setupFormValidation('#contactForm', '#a-js-contactForm-submit');\r\n  }\r\n  function setupForm2() {\r\n    $('body').off('focus', '#contactForm2', setupForm2);\r\n    setupFormValidation('#contactForm2', '#a-js-contactForm-submit2');\r\n  }\r\n  $('body').on('focus', '#contactForm', setupForm1);\r\n  $('body').on('focus', '#contactForm2', setupForm2);\r\n\r\n  function errorMessageCallback(type) {\r\n    if (type === 'ext') {\r\n      // Prefix to error message where the user tried to upload a forbidden file type\r\n      return 'Tillatte filtyper';\r\n    } else if (type === 'size') {\r\n      // Prefix to error message where the user tried to upload a file which is too big\r\n      return 'Maksimum filstrrelse';\r\n    }\r\n    return 'Det oppstod en feil';\r\n  }\r\n  listenForAttachmentChanges('#js-attachmentForm', errorMessageCallback);\r\n};\r\nwindow.infoportalInit();\r\n// $(document).foundation();\r\n"]}