{"version":3,"sources":["setupTruncateLines.js","popover.js","altinnLoader.js","altinnNettModal.js","feedbackToggle.js","listSort.js","compareTo.js","handleFocus.js","addListExpandHandler.js","newsArchive.js","menuToggleEffectAltinnett.js","subscribe.js","togglePanel.js","questionnaireInteraction.js","initializeDatepickerDashboard.js","validation.js","setupFormValidation.js","slick-carousel.js","searchFilterView.js","piechart.js","altinnett-init.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../altinnett.js","sourcesContent":["var setupTruncateLines = function() {\r\n  setTimeout(function() {\r\n    // Max two lines for all screen sizes\r\n    $('.a-js-truncate-2').truncate({\r\n      lines: 2\r\n    });\r\n    // Max two lines for screen sizes less than 768\r\n    // Intit with 3 lines instead of 2 for IE11\r\n    if (!!window.MSInputMethodContext\r\n      && !!document.documentMode\r\n      && window.innerWidth < 768) {\r\n      $('.a-js-truncate-2-sm-down').truncate({\r\n        lines: 3\r\n      });\r\n    } else {\r\n      $('.a-js-truncate-2-sm-down').truncate({\r\n        lines: 2\r\n      });\r\n    }\r\n  }, 1);\r\n\r\n  $(window).resize(function() {\r\n    // Max two lines for all screen sizes\r\n    $('.a-js-truncate-2').truncate('collapse');\r\n    $('.a-js-truncate-2').truncate('update');\r\n\r\n    // Max two lines for screen sizes less than 768\r\n    if (window.innerWidth < 768) {\r\n      $('.a-js-truncate-2-sm-down').truncate('collapse');\r\n      $('.a-js-truncate-2-sm-down').truncate('update');\r\n    } else {\r\n      $('.a-js-truncate-2-sm-down').truncate('expand');\r\n    }\r\n  });\r\n\r\n  $('.a-collapsePanel-body').on('shown.bs.collapse', function() {\r\n    var el = $(this).siblings('.a-collapsePanel-heading').find('.a-js-truncate-2-sm-down');\r\n    if (window.innerWidth < 768) {\r\n      el.truncate('expand');\r\n    }\r\n  });\r\n\r\n  $('.a-collapsePanel-body').on('hide.bs.collapse', function() {\r\n    var el = $(this).siblings('.a-collapsePanel-heading').find('.a-js-truncate-2-sm-down');\r\n    if (window.innerWidth < 768) {\r\n      el.truncate('collapse');\r\n    }\r\n  });\r\n};\r\n","/* eslint vars-on-top: 0 */\r\n/* globals $ */\r\nvar popoverLocalInit = function() {\r\n  var options = {\r\n    html: true,\r\n    placement: function(context, source) {\r\n      var position = $(source).offset();\r\n      $(context).addClass($(source).attr('data-popover-class'));\r\n      if ($(source).hasClass('a-js-popoverBig')) {\r\n        return 'bottom';\r\n      }\r\n      if (position.left < 125) {\r\n        return 'right';\r\n      }\r\n      if (position.left > ($(document).width() - $(source).width() - 125)) {\r\n        return 'left';\r\n      }\r\n      return 'bottom';\r\n    },\r\n    content: function() {\r\n      if ($(this).attr('data-popover-content')) {\r\n        return $('#' + $(this).data('popover-content')).html();\r\n      }\r\n      return false;\r\n    },\r\n    template: '<div class=\"popover\" role=\"popover\" tabindex=\"0\"><div class=\"arrow\"></div><div class=\"popover-body\"></div></div>'\r\n  };\r\n\r\n  $('[data-toggle=\"popover\"]').popover(options);\r\n\r\n  $('.a-js-togglePopoverIcons').each(function() {\r\n    // $(this).find('i').eq(1).hide();\r\n    $(this).find('.a-js-popoverIconExpanded').hide();\r\n  });\r\n\r\n  $('.a-js-popoverIconExpanded').on('click', function() {\r\n    $('.a-js-popoverIconExpanded').hide();\r\n    $('.a-js-popoverIconInitial').show();\r\n    // $(this).hide();\r\n    // $('.a-js-popoverIconInitial').show();\r\n  });\r\n  $('.a-js-popoverIconInitial').on('click', function() {\r\n    $(this).hide();\r\n    $(this).parent().find('.a-js-popoverIconExpanded').show();\r\n  });\r\n};\r\n\r\nvar forceFocusTriggerElement;\r\nvar popoverGlobalInit = function() {\r\n  $('[data-toggle=\"dropdown\"]').on('click', function(e) {\r\n    if (window.innerWidth < 992) {\r\n      $('.a-dropdown-overflow-menu-right').removeClass('dropdown-menu-right');\r\n    } else {\r\n      $('.a-dropdown-overflow-menu-right').addClass('dropdown-menu-right');\r\n    }\r\n  });\r\n\r\n  $('body').on('show.bs.popover', '[data-toggle=\"popover\"].a-js-tabable-popover', function(e) {\r\n    var triggerElement = this;\r\n    $(triggerElement).closest('.a-modal').scrollTop(0);\r\n  });\r\n\r\n  $('body').on('shown.bs.popover', '[data-toggle=\"popover\"].a-js-tabable-popover', function(e) {\r\n    var triggerElement = this;\r\n    setTimeout(function() {\r\n      $(triggerElement).after($($(triggerElement).data('bs.popover').tip));\r\n      $(triggerElement).closest('.a-modal').one('scroll', function() {\r\n        $('[data-toggle=\"popover\"]').popover('hide');\r\n      });\r\n    }, 0);\r\n  });\r\n\r\n  $('body').on('shown.bs.popover', '[data-toggle=\"popover\"].a-js-popover-forceFocus', function(e) {\r\n    $('body').append($('<button class=\"sr-only a-js-popoverTrick\">ignoreme</button>'));\r\n    forceFocusTriggerElement = this;\r\n\r\n    /*\r\n      This is a keyboard trap code\r\n      which prevents the user from exiting the \"popover\" dialog with tabbing.\r\n      ESC will close the \"popover\" dialog.\r\n    */\r\n\r\n    // Find popover-warning\r\n    var popoverWarning = $('.popover-warning');\r\n\r\n    // Find all focusable children\r\n    var focusableElementsString = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex=\"0\"], [contenteditable]';\r\n    // var focusableElements = popover.querySelectorAll(focusableElementsString);\r\n    var focusableElements = $(popoverWarning).find(focusableElementsString);\r\n\r\n    // If there are focusable elements, make keyboardtrap\r\n    if (focusableElements.length) {\r\n      // Convert NodeList to Array\r\n      focusableElements = Array.prototype.slice.call(focusableElements);\r\n\r\n      var firstTabStop = focusableElements[0];\r\n      var lastTabStop = focusableElements[focusableElements.length - 1];\r\n\r\n      // Focus first child, and scroll to current position\r\n      var position = $(window).scrollTop();\r\n      firstTabStop.focus({ preventScroll: true });\r\n      $(window).scrollTop(position);\r\n\r\n      $(popoverWarning).keydown(function(key) {\r\n        if (key.keyCode === 9) {\r\n          // Shift + Tab\r\n          if (key.shiftKey) {\r\n            if (document.activeElement === firstTabStop) {\r\n              key.preventDefault();\r\n              lastTabStop.focus();\r\n            }\r\n          // TAB\r\n          } else {\r\n            if (document.activeElement === lastTabStop) { // eslint-disable-line\r\n              key.preventDefault();\r\n              firstTabStop.focus();\r\n            }\r\n          }\r\n        } else if (key.keyCode === 27) {\r\n          // Escape\r\n          $('[data-toggle=\"popover\"]').popover('hide');\r\n          $(forceFocusTriggerElement).focus();\r\n        }\r\n      });\r\n\r\n      // if cancel/avbryt pressed with Enter, hide popover and focus on trigger\r\n      $(lastTabStop).keydown(function(key) {\r\n        if (key.keyCode === 13) {\r\n          // Enter\r\n          key.preventDefault();\r\n          $('[data-toggle=\"popover\"]').popover('hide');\r\n          $(forceFocusTriggerElement).focus();\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  $('body').on('hidden.bs.popover', '[data-toggle=\"popover\"].a-js-popover-forceFocus', function(e) {\r\n    $('body').find('.a-js-popoverTrick').remove();\r\n  });\r\n\r\n  // hides popover when the checkbutton is checked\r\n  $('body').on('focus', '[data-toggle=\"popover\"].sr-only', function(e) {\r\n    if ($(this).is(':checked')) {\r\n      $(this).popover('hide');\r\n    } else {\r\n      $(this).popover('show');\r\n    }\r\n  });\r\n\r\n  // show/hide popover on checkbutton change\r\n  $('body').on('change', 'a-switch[data-toggle=popover]', function() {\r\n    if ($(this).is(':checked')) {\r\n      $(this).popover('hide');\r\n    } else {\r\n      $(this).popover('show');\r\n    }\r\n  });\r\n\r\n  // Hide all existing popovers when opening a new popover\r\n  $('body').on('click', '[data-toggle=\"popover\"]', function(e) {\r\n    $('[data-toggle=\"popover\"]').not(this).popover('hide');\r\n  });\r\n\r\n  // Hide all existing popovers when focusing a new element\r\n  // which is not the open popover or any of its content\r\n  $('body').on('blur', '[data-toggle=\"popover\"], .popover *', function(e) {\r\n    setTimeout(function() {\r\n      var $focused = $(':focus');\r\n      if ((($focused.length !== 0 || forceFocusTriggerElement)\r\n        && !$focused.hasClass('popover')\r\n        && !$focused.parents('.popover').length >= 1) || $focused.hasClass('a-js-popoverTrick')) {\r\n        // disable blur when in modal to allow use of non-original scrollbar\r\n        if ($('.modal.show').length > 0) {\r\n          $('.popover-big[data-toggle=\"popover\"]').popover('hide');\r\n        }\r\n      }\r\n    }, 0);\r\n  });\r\n\r\n  // Hide popovers when clicking on something else than the trigger element\r\n  // and the popover itself\r\n  $('body').on('click', function(e) {\r\n    if ($(e.target).data('toggle') !== 'popover' && $(e.target).parents('[data-toggle=\"popover\"]').length === 0 && $(e.target).parents('.popover.show').length === 0) {\r\n      $('[data-toggle=\"popover\"]').popover('hide');\r\n      forceFocusTriggerElement = false;\r\n      $(this).parent().find('.a-js-popoverIconInitial').show();\r\n      $(this).parent().find('.a-js-popoverIconExpanded').hide();\r\n    }\r\n  });\r\n\r\n  function resetTranslate() {\r\n    $('.popover-big').attr('style', $('.popover-big').attr('style').replace(/translateX\\(.*?\\)/, 'translateX(0px)'));\r\n  }\r\n\r\n  function adjustBig() {\r\n    var modalHeight;\r\n    var padding;\r\n    if ($('.popover-big').length > 0) {\r\n      if ($('.modal.show').length > 0) {\r\n        // Add padding to make sure modal is big enough to contain popover\r\n        modalHeight = $('.modal-dialog').height() + $('.modalPage:visible').height();\r\n        padding = ($('.popover').offset().top + $('.modal').scrollTop() + $('.popover').height() + 5) - modalHeight;\r\n        $('.modalPage:visible').css('padding-bottom', padding + 'px');\r\n        // tranlate is somehow added by Bootstrap later when in modal??\r\n        setTimeout(resetTranslate, 0);\r\n      } else {\r\n        resetTranslate();\r\n      }\r\n    }\r\n  }\r\n\r\n  $('body').on('shown.bs.popover', '.a-js-persistPopover', function() {\r\n    $('.arrow').html('<style>.popover-big:after { left: ' + ($(this).offset().left + 10.5) + 'px !important; }</style>');\r\n    $('html, body').animate({\r\n      scrollTop: $('.a-js-persistPopover').offset().top - 50\r\n    }, 250);\r\n\r\n    adjustBig();\r\n  });\r\n\r\n  // clean up modal page fix\r\n  $('body').on('hidden.bs.popover', 'a-js-persistPopover', function(e) {\r\n    $('.modalPage').css('padding-bottom', '0px');\r\n  });\r\n\r\n  $(window).scroll(adjustBig);\r\n  $('.modal').scroll(adjustBig);\r\n  $(window).resize(adjustBig);\r\n};\r\n","/* globals AltinnLoader:true */\r\n\r\nAltinnLoader = {\r\n  addLoader: function($target) {\r\n    if ($target.find('.loader-container').length === 0) {\r\n      $target.prepend('<div class=\"loader-container\"><div class=\"loader loader-ellipsis\"></div></div>');\r\n    }\r\n    $('button.a-modal-back').attr('disabled', true);\r\n    $('button.a-modal-close').attr('disabled', true);\r\n  },\r\n\r\n  removeLoader: function($target) {\r\n    $target.find('.loader-container').remove();\r\n    $('button.a-modal-back').attr('disabled', false);\r\n    $('button.a-modal-close').attr('disabled', false);\r\n  }\r\n};\r\n","/* globals currentRequest, popoverLocalInit, AltinnModal */\r\n/* globals AltinnModal:true, AltinnLoader */\r\nAltinnModal = {\r\n  closeModal: function(settings) {\r\n    $('body').removeClass('a-modal-background-error a-displayNav');\r\n    $('body').removeClass('a-modal-background-success');\r\n    $(settings.target).modal('hide');\r\n    $('body').append($('.a-stickyHelp-container'));\r\n  },\r\n\r\n  loadModal: function(settings) {\r\n    var currentRequest = $.ajax({\r\n      url: settings.url,\r\n      beforeSend: function() {\r\n        if (typeof currentRequest !== 'undefined') {\r\n          currentRequest.abort();\r\n        }\r\n\r\n        AltinnLoader.addLoader($('body'));\r\n      },\r\n      data: settings.data\r\n    }).always(function() {\r\n    }).done(function(data) {\r\n      var modalPage = $('<div/>', {\r\n        class: 'modalPage',\r\n        html: data\r\n      });\r\n      var page = $('<div/>', {\r\n        class: 'a-page a-current-page',\r\n        data: {\r\n          pageIndex: 1,\r\n          isSuccess: settings.isSuccess,\r\n          isError: settings.isError,\r\n          showModalNav: settings.showModalNav\r\n        },\r\n        html: modalPage\r\n      });\r\n\r\n      $('body').removeClass('a-modal-background-error a-displayNav');\r\n      $('body').removeClass('a-modal-background-success');\r\n\r\n      // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\r\n      //   goToModalHeader();\r\n      // }\r\n\r\n      $(settings.target + ' .a-modal-content-target').append(page);\r\n      $(settings.target).trigger('loaded.altinn.modal');\r\n      $(settings.target).find('.a-current-page').first().data().enableDirtyPopover = settings.enableDirtyPopover;\r\n\r\n      // Initialize with backdrop: static to prevent modal from closing when clicking outside,\r\n      // and keyboard: false to prevent ESC from closing the modal\r\n      $(settings.target).modal({\r\n        backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n\r\n      $(settings.target).on('hidden.bs.modal', function() {\r\n        $(settings.target + ' .a-modal-content-target').empty();\r\n        $(settings.target).attr('aria-hidden', true);\r\n        $('#altinnModal').siblings('.row').removeClass('d-none');\r\n      });\r\n\r\n      $(settings.target).on('shown.bs.modal', function() {\r\n        $(settings.target).removeAttr('aria-hidden');\r\n        $('#altinnModal').siblings('.row').addClass('d-none');\r\n      });\r\n      popoverLocalInit();\r\n\r\n      if (settings.isError) {\r\n        $('body').addClass('a-modal-background-error');\r\n        if (settings.showModalNav) {\r\n          $('body').addClass('a-displayNav');\r\n        }\r\n      } else if (settings.isSuccess) {\r\n        $('body').addClass('a-modal-background-success');\r\n      }\r\n\r\n      AltinnLoader.removeLoader($('body'));\r\n      // causes issues in IE11 (blinking quickhelp when modal is open)\r\n      // $(settings.target).on('transitionend', function() {\r\n      // $(settings.target).append($('.a-stickyHelp-container'));\r\n      // });\r\n    });\r\n  },\r\n\r\n  nextModalPageWithContent: function(settings) {\r\n    var current;\r\n    var modalPage = $('<div/>', {\r\n      class: 'modalPage',\r\n      html: settings.content\r\n    });\r\n\r\n    var existingPages;\r\n    var newPage;\r\n    var newPageIndex;\r\n\r\n    existingPages = $(settings.target + ' :data(page-index)');\r\n\r\n    if (settings.clearHistory) {\r\n      newPageIndex = 1;\r\n    } else {\r\n      newPageIndex = existingPages.length + 1;\r\n    }\r\n\r\n    if (settings.clearHistory) {\r\n      $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\r\n    }\r\n\r\n    newPage = $('<div/>', {\r\n      class: 'a-page a-next-page',\r\n      data: {\r\n        pageIndex: newPageIndex,\r\n        isSuccess: settings.isSuccess,\r\n        isError: settings.isError,\r\n        showModalNav: settings.showModalNav\r\n      },\r\n      html: modalPage\r\n    });\r\n\r\n    // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\r\n    //   goToModalHeader();\r\n    // }\r\n\r\n    $(settings.target + ' .a-modal-content-target').append(newPage);\r\n    $(settings.target).trigger('loaded.altinn.modal');\r\n\r\n    $(settings.target).animate({\r\n      scrollTop: 0\r\n    }, 20);\r\n\r\n    current = $(settings.target + ' .a-current-page');\r\n\r\n    setTimeout(function() {\r\n      $('body').removeClass('a-modal-background-error a-displayNav');\r\n      $('body').removeClass('a-modal-background-success');\r\n\r\n      current.removeClass('a-current-page').addClass('a-previous-page');\r\n      newPage.removeClass('a-next-page').addClass('a-current-page');\r\n      $(newPage).data().enableDirtyPopover = settings.enableDirtyPopover;\r\n\r\n      if (settings.isError) {\r\n        $('body').addClass('a-modal-background-error');\r\n        if (settings.showModalNav) {\r\n          $('body').addClass('a-displayNav');\r\n        }\r\n      } else if (settings.isSuccess) {\r\n        $('body').addClass('a-modal-background-success');\r\n      }\r\n    }, 0);\r\n\r\n    current.on('transitionend', function() {\r\n      if (settings.clearHistory) {\r\n        $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\r\n      } else {\r\n        current.hide().off();\r\n      }\r\n    });\r\n\r\n    popoverLocalInit();\r\n  },\r\n\r\n  nextModalPage: function(settings) {\r\n    var currentRequest = $.ajax({\r\n      url: settings.url,\r\n      beforeSend: function() {\r\n        if (typeof currentRequest !== 'undefined') {\r\n          currentRequest.abort();\r\n        }\r\n        AltinnLoader.addLoader($(settings.target).find('.a-current-page .a-modal-body'));\r\n      },\r\n      data: settings.data\r\n    }).always(function() {\r\n    }).done(function(data) {\r\n      var current;\r\n      var modalPage = $('<div/>', {\r\n        class: 'modalPage',\r\n        html: data\r\n      });\r\n\r\n      var existingPages;\r\n      var newPage;\r\n      var newPageIndex;\r\n\r\n      existingPages = $(settings.target + ' :data(page-index)');\r\n\r\n      if (settings.clearHistory) {\r\n        newPageIndex = 1;\r\n      } else {\r\n        newPageIndex = existingPages.length + 1;\r\n      }\r\n\r\n      if (settings.clearHistory) {\r\n        $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\r\n      }\r\n\r\n      newPage = $('<div/>', {\r\n        class: 'a-page a-next-page',\r\n        data: {\r\n          pageIndex: newPageIndex,\r\n          isSuccess: settings.isSuccess,\r\n          isError: settings.isError,\r\n          showModalNav: settings.showModalNav\r\n        },\r\n        html: modalPage\r\n      });\r\n\r\n      // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\r\n      //   goToModalHeader();\r\n      // }\r\n\r\n      $(settings.target + ' .a-modal-content-target').append(newPage);\r\n      $(settings.target).trigger('loaded.altinn.modal');\r\n\r\n      $(settings.target).animate({\r\n        scrollTop: 0\r\n      }, 20);\r\n\r\n      current = $(settings.target + ' .a-current-page');\r\n\r\n      setTimeout(function() {\r\n        $('body').removeClass('a-modal-background-error a-displayNav');\r\n        $('body').removeClass('a-modal-background-success');\r\n\r\n        current.removeClass('a-current-page').addClass('a-previous-page');\r\n        newPage.removeClass('a-next-page').addClass('a-current-page');\r\n        $(newPage).data().enableDirtyPopover = settings.enableDirtyPopover;\r\n\r\n        if (settings.isError) {\r\n          $('body').addClass('a-modal-background-error');\r\n          if (settings.showModalNav) {\r\n            $('body').addClass('a-displayNav');\r\n          }\r\n        } else if (settings.isSuccess) {\r\n          $('body').addClass('a-modal-background-success');\r\n        }\r\n      }, 0);\r\n\r\n      current.on('transitionend', function() {\r\n        if (settings.clearHistory) {\r\n          $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\r\n        } else {\r\n          current.hide().off();\r\n        }\r\n\r\n        AltinnLoader.removeLoader(current.find('.a-modal-body'));\r\n      });\r\n\r\n      popoverLocalInit();\r\n    });\r\n  },\r\n\r\n  previousModalPage: function(settings) {\r\n    var current;\r\n    var allPages;\r\n    var previous;\r\n    var pagesToPop;\r\n    var isError;\r\n    var showModalNav;\r\n    var isSuccess;\r\n\r\n    if (!settings.pagesToPop) {\r\n      pagesToPop = 1;\r\n    } else {\r\n      pagesToPop = settings.pagesToPop;\r\n    }\r\n\r\n    if ($(settings.target + ' .a-current-page').data('page-index') - pagesToPop <= 0) {\r\n      $(settings.target).one('hidden.bs.modal', function() {\r\n        $('body').removeClass('a-modal-background-error a-displayNav');\r\n        $('body').removeClass('a-modal-background-success');\r\n      });\r\n\r\n      $(settings.target).modal('hide');\r\n      return;\r\n    }\r\n\r\n    current = $(settings.target + ' .a-current-page');\r\n    allPages = $(settings.target + ' :data(page-index)');\r\n    previous = allPages.filter(function() {\r\n      return $(this).data('page-index') === allPages.length - 1;\r\n    });\r\n\r\n    previous.show();\r\n    isError = $(previous).data().isError;\r\n    showModalNav = $(previous).data().showModalNav;\r\n    isSuccess = $(previous).data().isSuccess;\r\n\r\n    current.addClass('a-next-page');\r\n    current.removeClass('a-current-page');\r\n\r\n    // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\r\n    //   goToModalHeader();\r\n    // }\r\n\r\n    setTimeout(function() {\r\n      $('body').removeClass('a-modal-background-error a-displayNav');\r\n      $('body').removeClass('a-modal-background-success');\r\n\r\n      previous.addClass('a-current-page').removeClass('a-previous-page');\r\n\r\n      if (isError) {\r\n        $('body').addClass('a-modal-background-error');\r\n        if (showModalNav) {\r\n          $('body').addClass('a-displayNav');\r\n        }\r\n      } else if (isSuccess) {\r\n        $('body').addClass('a-modal-background-success');\r\n      }\r\n    }, 0);\r\n\r\n    current.on('transitionend', function() {\r\n      var previousPages = allPages.filter(function() {\r\n        return $(this).data('page-index') > allPages.length - pagesToPop;\r\n      });\r\n      previousPages.remove();\r\n    });\r\n  },\r\n\r\n  setCurrentPageIsDirty: function(target, state) {\r\n    $(target).find('.a-current-page').first().data().isDirty = state;\r\n  },\r\n\r\n  init: function() {\r\n    var that = this;\r\n    $('body').on('click', '[data-toggle=\"altinn-modal\"]', function() {\r\n      var $source = $(this);\r\n      if ($source.data().action === 'load') {\r\n        that.loadModal({\r\n          url: $source.data().url,\r\n          isSuccess: $source.data().isSuccess,\r\n          isError: $source.data().isError,\r\n          target: $source.data().target,\r\n          enableDirtyPopover: $source.data().enableDirtyPopover\r\n        });\r\n      } else if ($source.data().action === 'next') {\r\n        that.nextModalPage({ url: $source.data().url,\r\n          target: $source.data().target,\r\n          isSuccess: $source.data().isSuccess,\r\n          isError: $source.data().isError,\r\n          showModalNav: $source.data().showModalNav,\r\n          clearHistory: $source.data().clearHistory,\r\n          enableDirtyPopover: $source.data().enableDirtyPopover });\r\n      } else if ($source.data().action === 'back') {\r\n        that.previousModalPage({\r\n          target: $source.data().target,\r\n          pagesToPop: $source.data().pages\r\n        });\r\n      } else if ($source.data().action === 'close') {\r\n        that.closeModal({ target: $source.data().target });\r\n      }\r\n    });\r\n\r\n    $('body').on('click', '.a-modal-back', function() {\r\n      var $modal = $(this).closest('.a-modal');\r\n      if ($modal.find('.a-current-page').first().data().enableDirtyPopover\r\n        && $modal.find('.a-current-page').first().data().isDirty) {\r\n        $(this).popover('show');\r\n      } else {\r\n        that.previousModalPage({ target: '#' + $modal[0].id });\r\n      }\r\n    });\r\n\r\n    $('body').on('click', '.a-modal-close', function() {\r\n      var $modal = $(this).closest('.a-modal');\r\n      if ($modal.find('.a-current-page').first().data().enableDirtyPopover\r\n        && $modal.find('.a-current-page').first().data().isDirty) {\r\n        $(this).popover('show');\r\n      } else {\r\n        that.closeModal({ target: '#' + $modal[0].id });\r\n      }\r\n    });\r\n\r\n    $('body').on('click', '.a-js-modal-dirtyBackBtn', function() {\r\n      AltinnModal.previousModalPage({ target: '#' + $(this).closest('.a-modal')[0].id });\r\n      $('button[aria-describedby=' + $(this).parent().parent().attr('id') + ']').popover('hide');\r\n    });\r\n\r\n    $('body').on('click', '.a-js-modal-dirtyCancelBtn', function() {\r\n      $('button[aria-describedby=' + $(this).parent().parent().attr('id') + ']').popover('hide');\r\n    });\r\n\r\n    $('body').on('click', '.a-js-modal-dirtyCloseBtn', function() {\r\n      AltinnModal.closeModal({ target: '#' + $(this).closest('.a-modal')[0].id });\r\n      $('button[aria-describedby=' + $(this).parent().parent().attr('id') + ']').popover('hide');\r\n    });\r\n\r\n    function urlQuery(query) { // Parse current URL for query value\r\n      var _query = query.replace(/[[]/, '[').replace(/[\\]]/, '\\\\]');\r\n      var expr = '[\\\\?&]' + _query + '=([^&#]*)';\r\n      var regex = new RegExp(expr);\r\n      var results = regex.exec(window.location.href);\r\n      if (results !== null) {\r\n        return results[1];\r\n      }\r\n      return false;\r\n    }\r\n    if (urlQuery('form') === '1') {\r\n      AltinnModal.loadModal({\r\n        url: '/hjelp/kontaktskjema-for-hjelp/',\r\n        target: '#modal'\r\n      });\r\n    }\r\n  }\r\n};\r\n","/* globals $ */\r\nvar feedbackToggle = function() {\r\n  if ($('.a-js-feedbackToggle').length > 0) {\r\n    $('.a-js-feedbackToggle').closest('fieldset').next().hide();\r\n    $('.a-js-feedbackToggle').closest('fieldset').next().next()\r\n      .hide();\r\n    $('.a-js-feedbackToggle').closest('fieldset').next().next()\r\n      .next()\r\n      .hide();\r\n    $('.a-js-feedbackToggle').each(function() {\r\n      $(this).find('input[type=radio]').change(function() {\r\n        if ($(this).val() === 'radio1' && $(this).is(':checked')) {\r\n          $(this).closest('fieldset').next().show();\r\n          $(this).closest('fieldset').next().next()\r\n            .hide();\r\n          $(this).closest('fieldset').next().next()\r\n            .next()\r\n            .hide();\r\n        } else if ($(this).val() === 'radio2' && $(this).is(':checked')) {\r\n          $(this).closest('fieldset').next().hide();\r\n          $(this).closest('fieldset').next().next()\r\n            .show();\r\n          $(this).closest('fieldset').next().next()\r\n            .next()\r\n            .show();\r\n        }\r\n      });\r\n      $(this).closest('form').find('button').on('click', function() {\r\n        $(this).closest('fieldset').next().show();\r\n        $(this).closest('fieldset').next().next()\r\n          .hide();\r\n        $(this).closest('fieldset').next().next()\r\n          .next()\r\n          .hide();\r\n      }.bind(this));\r\n    });\r\n  }\r\n};\r\n","/* globals compareTo */\r\nvar sortListAlphanumerically = function(src, sortIndex) {\r\n  var $list = $(src).closest('.a-list-container').find('.a-list');\r\n  var rows = $list.find('li:not(.a-list-header)');\r\n  var reverse;\r\n\r\n  var active = $(src).hasClass('a-active');\r\n  if (!active) {\r\n    $(src).closest('.a-list-container').find('.a-list-sortHeader').removeClass('a-active')\r\n      .removeClass('a-js-reverse-sort');\r\n    $(src).addClass('a-active');\r\n  } else {\r\n    $(src).toggleClass('a-js-reverse-sort');\r\n  }\r\n\r\n  reverse = $(src).hasClass('a-js-reverse-sort');\r\n\r\n  rows.sort(function(a, b) {\r\n    var A = $($($($(a).children()[0]).children()[sortIndex]).find('.a-js-sortValue')[0]).text()\r\n      .toUpperCase();\r\n    var B = $($($($(b).children()[0]).children()[sortIndex]).find('.a-js-sortValue')[0]).text()\r\n      .toUpperCase();\r\n    return reverse ? compareTo(B, A) : compareTo(A, B);\r\n  });\r\n\r\n  $.each(rows, function(index, row) {\r\n    if ($(row).find('.a-js-sortValue').length > 0) {\r\n      $list.append(row);\r\n    }\r\n  });\r\n\r\n  // handles load more row\r\n  $.each(rows, function(index, row) {\r\n    if ($(row).find('.a-js-sortValue').length === 0) {\r\n      $list.append(row);\r\n    }\r\n  });\r\n};\r\n\r\nvar defaultListSort = function() {\r\n  $('.a-list-container').each(function() {\r\n    var sortHeader = $(this).find('.a-list-sortHeader')[0];\r\n    var index = $(sortHeader).index();\r\n    sortListAlphanumerically(sortHeader, index);\r\n  });\r\n};\r\n\r\nvar addListSortHandler = function() {\r\n  $('.a-list-sortHeader').on('click', function() {\r\n    var index = $(this).index();\r\n    sortListAlphanumerically(this, index);\r\n  });\r\n\r\n  defaultListSort();\r\n};\r\n","var compareTo = function(firstItem, secondItem) {\r\n  var first;\r\n  var second;\r\n  if (firstItem === undefined && secondItem === undefined) {\r\n    return 0;\r\n  }\r\n  if (firstItem === undefined) {\r\n    return 1;\r\n  }\r\n  if (secondItem === undefined) {\r\n    return -1;\r\n  }\r\n\r\n  first = firstItem.toString();\r\n  second = secondItem.toString();\r\n  if (first < second) {\r\n    return -1;\r\n  }\r\n\r\n  if (first > second) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n};\r\n","/* globals $ */\r\nvar handleFocus = function() {\r\n  // If state on input is 'focus', add class to a-input: 'a-input-focus'\r\n  $('body').on('focus', 'input.form-control', function() {\r\n    $(this).parent().addClass('a-input-focus');\r\n  });\r\n\r\n  $('body').on('blur', 'input.form-control', function() {\r\n    $(this).parent().removeClass('a-input-focus');\r\n  });\r\n\r\n  $('.a-radioButtons-stackedList').find('input[type=radio]').change(function() {\r\n    var me = $(this);\r\n    if (me.is(':checked')) {\r\n      me.parent().addClass('a-js-radioParentGray');\r\n      $('input[type=radio]').each(function() {\r\n        if ($(this).attr('id') !== me.attr('id') &&\r\n          $(this).attr('name') === me.attr('name')) {\r\n          $(this).parent().removeClass('a-js-radioParentGray');\r\n        }\r\n      });\r\n    }\r\n  });\r\n};\r\n","var addListExpandHandler = function() {\r\n  $('body').on('click', '.a-list *[data-toggle=\"collapse\"]', function() {\r\n    // This script runs before the bootstrap collapse handler, so the collapsed-class will still be\r\n    // present even though the content is about to be expanded\r\n    if ($(this).hasClass('collapsed')) {\r\n      $(this).closest('li').addClass('a-expanded');\r\n      $(this).closest('li').siblings().removeClass('a-expanded');\r\n    } else {\r\n      $(this).closest('li').removeClass('a-expanded');\r\n    }\r\n  });\r\n};\r\n","/* globals $ */\r\n\r\nvar newsArchive = function() {\r\n  var page = 1;\r\n  var numberOfItemsPerPage = 5;\r\n  var rootSelector = '.a-newsArchive';\r\n  var articleCssSelector = '.a-linkArticle';\r\n  var $loadMoreButton = $('.a-btn-loadMore');\r\n  var articlesCount = $(articleCssSelector).length;\r\n\r\n  function visibleItems() {\r\n    return page * numberOfItemsPerPage;\r\n  }\r\n\r\n  function setButtonVisibility() {\r\n    if (articlesCount <= visibleItems()) {\r\n      $loadMoreButton.hide();\r\n    }\r\n  }\r\n\r\n  if ($(rootSelector).length > 0) {\r\n    $loadMoreButton.on('click', function() {\r\n      var articles;\r\n      page += 1;\r\n      $(':nth-child(n+' + (visibleItems() + 1) + ')' + articleCssSelector).hide();\r\n      $(':nth-child(-n+' + visibleItems() + ')' + articleCssSelector).show();\r\n      setButtonVisibility();\r\n    });\r\n\r\n    setButtonVisibility();\r\n  }\r\n};\r\n","var wasDark = $('header').hasClass('a-darkBackground');\r\nvar action = function(e) {\r\n  if ($(e.target).closest('.a-globalNav-main').length === 0 &&\r\n  $(e.target).closest('.navbar-toggler').length === 0) {\r\n    if ($('.a-globalNav-main').is(':visible')) {\r\n      $('.navbar-toggler').attr('data-jsexpanded', 'false');\r\n      $('.a-globalNav-main').hide();\r\n      $('body').css('background-color', '');\r\n      if (wasDark) {\r\n        $('header').addClass('a-darkBackground');\r\n        $('.a-globalNav-logo').find('img')\r\n          .attr('src', $('.a-globalNav-logo').find('img').attr('src').replace('blue', 'white'));\r\n      }\r\n      $('.a-page').children(':not(header)').removeClass('a-js-hidden');\r\n    }\r\n  } else if ($(e.target).closest('.navbar-toggler').length > 0) {\r\n    if ($('.a-globalNav-main').is(':visible')) {\r\n      $('.navbar-toggler').attr('data-jsexpanded', 'false');\r\n      $('.a-globalNav-main').hide();\r\n      $('body').css('background-color', '');\r\n      if (wasDark) {\r\n        $('header').addClass('a-darkBackground');\r\n        $('.a-globalNav-logo').find('img')\r\n          .attr('src', $('.a-globalNav-logo').find('img').attr('src').replace('blue', 'white'));\r\n      }\r\n      $('.a-page').children(':not(header)').removeClass('a-js-hidden');\r\n    } else {\r\n      $('.navbar-toggler').attr('data-jsexpanded', 'true');\r\n      $('.a-globalNav-main').show();\r\n      $('body').css('background-color', '#fff');\r\n      if (wasDark) {\r\n        $('header').removeClass('a-darkBackground');\r\n        $('.a-globalNav-logo').find('img')\r\n          .attr('src', $('.a-globalNav-logo').find('img').attr('src').replace('white', 'blue'));\r\n      }\r\n      $('.a-page').children(':not(header)').addClass('a-js-hidden');\r\n    }\r\n  }\r\n};\r\nfunction menuHandler() {\r\n  // enable tabbing and mouse click on mobile menu btn\r\n  if ($('body').width() < 768) {\r\n    $('body').on('click', action);\r\n  }\r\n}\r\nmenuHandler();\r\n$(window).on('resize', function() {\r\n  $('body').off('click', action);\r\n  menuHandler();\r\n});\r\n\r\n/* globals mobileNavigation */\r\n$('.an-dropdown-navigationMenu').on('click', 'button[data-toggle=\"collapse\"]', function(event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n  $($(this).data('target')).collapse('espen');\r\n});\r\n/* globals mobileNavigation */\r\n","/* globals $ */\r\nvar subscribe = function() {\r\n  var validate = function(elem, skipVal) {\r\n    var re = new RegExp(elem.attr('data-val-regex-pattern'));\r\n    if (re.test(elem.val())) {\r\n      elem.closest('.a-card').find('button').removeAttr('disabled')\r\n        .removeClass('disabled');\r\n    } else {\r\n      elem.closest('.a-card').find('button').attr('disabled', 'disabled')\r\n        .addClass('disabled');\r\n    }\r\n  };\r\n  if ($('.a-js-subscribe').length > 0) {\r\n    $('.a-js-subscribe').each(function() {\r\n      var _this = $(this);\r\n      _this.closest('.a-card').find('.a-js-finishText').hide();\r\n      _this.closest('.a-card').find('.a-js-altText').hide();\r\n      _this.find('input').on('input', function() {\r\n        validate($(this));\r\n      });\r\n      _this.find('input').on('keypress', function(e) {\r\n        var keyCode = e.keyCode || e.which;\r\n        if (keyCode === 13) {\r\n          e.preventDefault();\r\n          if (!_this.find('button').hasClass('disabled')) {\r\n            _this.find('button').trigger('click');\r\n          }\r\n        }\r\n      });\r\n      _this.find('button').on('click', function() {\r\n        var __this = $(this);\r\n        _this.find('.a-form-group-items.input-group').addClass('disabled')\r\n          .addClass('a-input-approved');\r\n        _this.find('input').attr('disabled', 'disabled');\r\n        _this.closest('.a-card').find('.a-js-finishText').show();\r\n        _this.closest('.a-card').find('.a-js-altText').hide();\r\n        __this.hide();\r\n        $('.a-js-undo').on('click', function() {\r\n          _this.find('.a-form-group-items.input-group').removeClass('disabled')\r\n            .removeClass('a-input-approved');\r\n          _this.find('input').removeAttr('disabled');\r\n          _this.closest('.a-card').find('.a-js-finishText').hide();\r\n          _this.closest('.a-card').find('.a-js-altText').show();\r\n          __this.show();\r\n        });\r\n      });\r\n    });\r\n  }\r\n};\r\n","/* globals\r\n  setupExpandContent\r\n*/\r\n$('body').on('show.bs.collapse', '.a-collapsePanel-body', function(e) {\r\n  var that = this;\r\n  if ($(e.target).hasClass('a-collapsePanel-body')) {\r\n    setTimeout(function() {\r\n      var $collapsePanelHeader = $(that).siblings('.a-js-index-heading').first();\r\n      var $msgIconWrapper = $collapsePanelHeader.find('.a-inboxHeadingContent')\r\n        .find('.a-msgIconSecondary')\r\n        .closest('.a-msgIconWrapper');\r\n\r\n      $msgIconWrapper.find('.reg')\r\n        .hide()\r\n        .siblings('.a-msgIconSecondary')\r\n        .show();\r\n\r\n      $msgIconWrapper.find('span').attr('aria-hidden', true);\r\n      $msgIconWrapper.find('span:last-of-type').removeAttr('aria-hidden');\r\n\r\n      $('.a-collapsePanel').removeClass('expanded');\r\n      $(that).closest('.a-collapsePanel').addClass('expanded');\r\n      $('.a-js-index-heading').addClass('dim');\r\n      $('.a-collapsePanel.expanded').find('.a-js-index-heading').removeClass('dim');\r\n      setupExpandContent();\r\n    }, 0);\r\n  }\r\n});\r\n\r\n$('body').on('hide.bs.collapse', '.a-collapsePanel-body', function(e) {\r\n  var that = this;\r\n  if ($(e.target).hasClass('a-collapsePanel-body')) {\r\n    setTimeout(function() {\r\n      var $collapsePanelHeader = $(that).siblings('.a-js-index-heading').first();\r\n      $collapsePanelHeader.find('.a-inboxHeadingContent').removeClass('a-msgUnread');\r\n      $(that).closest('.a-collapsePanel').removeClass('expanded');\r\n      if ($('.a-collapsePanel.expanded').length === 0) {\r\n        $('.a-js-index-heading').removeClass('dim');\r\n      } else {\r\n        $collapsePanelHeader.addClass('dim');\r\n      }\r\n    }, 0);\r\n  }\r\n});\r\n\r\n$('.a-js-collapseInboxMessage').click(function() {\r\n  $('div.card.a-accordion-card.a-collapsePanel.expanded a[data-toggle=\"collapse\"]').click();\r\n});\r\n","/* globals $ */\r\nvar questionnaireInteraction = function() {\r\n  $('.a-trigger-question').each(function() {\r\n    $(this).find('input').on('change', function() {\r\n      $(this).parent().parent().parent()\r\n        .parent()\r\n        .next()\r\n        .css('display', 'block');\r\n    });\r\n  });\r\n};\r\n","/* globals $ */\r\nvar initializeDatepicker = function() {\r\n  var today = ('0' + new Date().getDate()).slice(-2) + '.' + ('0' + (new Date().getMonth() + 1)).slice(-2) + '.' + new Date().getFullYear();\r\n\r\n  var returnUserLanguageNumericCodeFromCookie = function(cookies, cname) {\r\n    var name = cname + '=';\r\n    var decodedCookies = decodeURIComponent(cookies);\r\n    var splitCookies = decodedCookies.split(';');\r\n    var i;\r\n    var c;\r\n    for (i = 0; i < splitCookies.length; i++) {\r\n      c = splitCookies[i];\r\n      if (c.charAt(0) === ' ') {\r\n        c = c.substring(1);\r\n      }\r\n      if (c.indexOf(name) === 0 && c.indexOf('UL') > 0) {\r\n        return c.substring(c.indexOf('UL') + 3);\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  var returnLanguageCodeFromNumericCode = function(numeric) {\r\n    var lang;\r\n    switch (numeric) {\r\n    // bokmål\r\n    case '1044':\r\n      return 'no';\r\n    // engelsk\r\n    case '1033':\r\n      return 'en';\r\n    // nynorsk\r\n    case '2068':\r\n      return 'nn';\r\n    default:\r\n      return 'no';\r\n    }\r\n  };\r\n\r\n  var ulNumeric = returnUserLanguageNumericCodeFromCookie(document.cookie, 'altinnPersistentContext');\r\n  var userLanguage = returnLanguageCodeFromNumericCode(ulNumeric);\r\n\r\n  // if ($('.a-overlay-container').length > 0) {\r\n  //   $('.a-overlay-container').attr('id', 'picker-container');\r\n  // } else {\r\n  $('body').attr('id', 'picker-container');\r\n  // }\r\n\r\n  // Kommentert ut pga bugging på avansert søk\r\n\r\n  $('.form-control.date').each(function() {\r\n    $(this).val($(this).val() || today);\r\n  });\r\n  $('.form-control.date').datepicker({\r\n    format: 'dd.mm.yyyy',\r\n    language: userLanguage,\r\n    todayHighlight: true,\r\n    orientation: 'bottom left',\r\n    autoclose: true,\r\n    maxViewMode: 0,\r\n    container: '#picker-container',\r\n    templates: {\r\n      leftArrow: '<i class=\"ai ai-back\"></i>',\r\n      rightArrow: '<i class=\"ai ai-arrowright\"></i>'\r\n    }\r\n  }).on('show', function(e) {\r\n    $('.datepicker').find('table').attr('cellpadding', '0');\r\n    $('.datepicker').find('table').attr('cellspacing', '0');\r\n  });\r\n  if ($('.form-control.date').length > 0) {\r\n    $('body').on('click', function(e) {\r\n      $('.datepicker').hide();\r\n    });\r\n    $('.form-control.date').on('click', function(e) {\r\n      e.stopPropagation(); e.preventDefault();\r\n    });\r\n    $('.datepicker').on('click', function(e) {\r\n      e.stopPropagation(); e.preventDefault();\r\n    });\r\n  }\r\n};\r\n","var setValidatorSettings = function() {\r\n  var defaultOptions = {\r\n    ignore: ':hidden, .ignoreValidation',\r\n    highlight: function(element, errorClass, validClass) {\r\n      $(element).closest('.form-group').addClass(errorClass);\r\n    },\r\n    unhighlight: function(element, errorClass, validClass) {\r\n      $(element).closest('.form-group').removeClass(errorClass);\r\n    },\r\n    focusInvalid: false\r\n  };\r\n  $.validator.setDefaults(defaultOptions);\r\n  $.validator.unobtrusive.options = {\r\n    errorClass: 'has-error'\r\n  };\r\n};\r\n","/* globals $ */\r\nfunction setupFormValidation(formId, buttonId) {\r\n  var $submitBtn = $(buttonId);\r\n  var wasSubmitted = false;\r\n  var storedString = '';\r\n  var validDropdown = function(el) {\r\n    if (\r\n      el.attr('required') !== undefined && el.attr('required') === 'required' &&\r\n      el.attr('data-dropdowndefaultvalue') === el.find('.a-form-text').text()\r\n    ) {\r\n      el.closest('.a-form-group').addClass('has-error').find('.a-message-error').css('display', 'table');\r\n    } else {\r\n      el.closest('.a-form-group').removeClass('has-error').find('.a-message-error').css('display', 'none');\r\n    }\r\n  };\r\n  var validAllDropdowns = function() {\r\n    var invalids = [];\r\n    $('.a-js-dropdownToValidate').each(function(index, el) {\r\n      if (\r\n        $(el).attr('required') !== undefined && $(el).attr('required') === 'required' &&\r\n        $(el).attr('data-dropdowndefaultvalue') === $(el).find('.a-form-text').text()\r\n      ) {\r\n        invalids.push(index);\r\n      }\r\n    });\r\n    return invalids.length === 0;\r\n  };\r\n  var validAllReferancials = function() {\r\n    var invalids = [];\r\n    $('.a-js-validateThisAgainstPrev').each(function(index, el) {\r\n      if (\r\n        $(el).closest('.a-form-group').hasClass('has-error')\r\n      ) {\r\n        invalids.push(index);\r\n      }\r\n    });\r\n    return invalids.length === 0;\r\n  };\r\n  var validateBackwards = function(el) {\r\n    if (el.prev().find('.a-js-dropdownToValidate').length > 0) {\r\n      validDropdown(el.prev().find('.a-js-dropdownToValidate'));\r\n      validateBackwards(el.prev());\r\n    } else if (el.prev().hasClass('form-group')) {\r\n      if (el.prev().find('input:not(.a-js-validateThisAgainstPrev)').length > 0) {\r\n        el.prev().find('input:not(.a-js-validateThisAgainstPrev)').valid();\r\n      }\r\n      if (el.prev().find('.a-js-validateThisAgainstPrev').length > 0) {\r\n        el.prev().find('.a-js-validateThisAgainstPrev').trigger('change');\r\n      }\r\n      if (el.prev().find('textarea').length > 0) {\r\n        el.prev().find('textarea').valid();\r\n      }\r\n      validateBackwards(el.prev());\r\n    }\r\n  };\r\n  var validateAgainstPrev = function() {\r\n    if ($(this).closest('.form-group').prev().find('.a-message-error')\r\n      .text() !== '') {\r\n      $(this).closest('.form-group').find('.a-message-error').text(\r\n        $(this).closest('.form-group').prev().find('.a-message-error')\r\n          .text()\r\n      );\r\n      storedString = $(this).closest('.form-group').prev().find('.a-message-error')\r\n        .text();\r\n    } else {\r\n      $(this).closest('.form-group').find('.a-message-error').text(\r\n        storedString\r\n      );\r\n    }\r\n    if ($(this).val() !==\r\n      $(this).closest('.form-group').prev().find('input')\r\n        .val() || $(this).val() === '') {\r\n      setTimeout(function() {\r\n        $(this).closest('.a-form-group').addClass('has-error').find('.a-message-error')\r\n          .css('display', 'table');\r\n      }.bind(this), 0);\r\n    } else {\r\n      $(this).closest('.a-form-group').removeClass('has-error').find('.a-message-error')\r\n        .css('display', 'none');\r\n    }\r\n  };\r\n\r\n  var validateForm = function() {\r\n    var str;\r\n    if ($(formId).validate().checkForm() && validAllDropdowns() && validAllReferancials()) {\r\n      $submitBtn.prop('disabled', false);\r\n      $submitBtn.removeClass('disabled');\r\n    } else {\r\n      $submitBtn.prop('disabled', 'disabled');\r\n      $submitBtn.addClass('disabled');\r\n    }\r\n\r\n    if (!wasSubmitted) {\r\n      $(formId).validate().submitted = {};\r\n    }\r\n  };\r\n\r\n  $(formId + ' .a-js-dropdownToValidate').each(function() {\r\n    $(this).attr('data-dropdowndefaultvalue', $(this).find('.a-form-text').text());\r\n  });\r\n\r\n  if (!buttonId) {\r\n    $submitBtn = $(formId + ' button[type=\"submit\"]');\r\n  }\r\n  $.validator.unobtrusive.parse($(formId));\r\n\r\n  $submitBtn.addClass('disabled');\r\n  $submitBtn.prop('disabled', 'disabled');\r\n\r\n  $(formId).on('blur input change', '*', validateForm);\r\n\r\n  $(formId + ' .a-js-dropdownToValidate').next().on('click', function() {\r\n    setTimeout(function() {\r\n      validDropdown($(this).prev());\r\n    }.bind(this), 0);\r\n    validateBackwards($(this).closest('.form-group'));\r\n  });\r\n\r\n  $(formId + ' .a-js-dropdownToValidate').on('blur', function() {\r\n    validDropdown($(this));\r\n    validateBackwards($(this).closest('.form-group'));\r\n  });\r\n  $('.a-js-certificateContainer').on('focus', function() {\r\n    $('.a-js-certificateContainer').closest('label').addClass('a-custom-fileupload--focused');\r\n  });\r\n  $('.a-js-certificateContainer').on('blur', function() {\r\n    $('.a-js-certificateContainer').closest('label').removeClass('a-custom-fileupload--focused');\r\n  });\r\n  $('.a-js-validateThisAgainstPrev').each(function() {\r\n    storedString = $(this).closest('.form-group').prev().find('input')\r\n      .attr('data-val-regex');\r\n  });\r\n\r\n  $(formId + ' .form-control').not('.a-js-validateThisAgainstPrev').on('blur change', function() {\r\n    var $nextInput = $('#text-input-epost1').closest('.form-group').next().find('.a-js-validateThisAgainstPrev');\r\n    if ($nextInput.length > 0 && $nextInput.val() !== '') {\r\n      validateAgainstPrev.bind($nextInput)();\r\n      setTimeout(function() {\r\n        validateForm();\r\n      }, 0);\r\n    }\r\n  });\r\n  $('.a-js-validateThisAgainstPrev').on('keyup', function(e) {\r\n    var hasError = $(this).closest('.form-group').hasClass('has-error');\r\n    e.stopPropagation();\r\n    if (hasError) {\r\n      validateAgainstPrev.bind(this)();\r\n    }\r\n  });\r\n\r\n  $('.a-js-validateThisAgainstPrev').on('change blur', function(e) {\r\n    e.stopPropagation();\r\n    validateAgainstPrev.bind(this)();\r\n  });\r\n}\r\n","var setupSlickCarousel = function() {\r\n  $(document).ready(function() {\r\n    if ($('[data-slideshow]').length) {\r\n      $('[data-slideshow]').each(function() {\r\n        $(this).slick({\r\n          infinite: false,\r\n          appendArrows: $(this).next('[data-slideshow-buttons]'),\r\n          prevArrow: '<button type=\"button\" class=\"slick-prev an-slideshow-button an-slideshow-button-previous\"><i class=\"ai ai-arrowright\"><span class=\"sr-only\">Forrige</span></i></button>',\r\n          nextArrow: '<button type=\"button\" class=\"slick-prev an-slideshow-button an-slideshow-button-next\"><i class=\"ai ai-arrowright\"><span class=\"sr-only\">Neste</span></i></button>'\r\n        });\r\n      });\r\n    }\r\n  });\r\n};\r\n","function searchFilterView() {\r\n  function RepositionStickyHelp() {\r\n    var searchFilters = $('.a-overlay-container');\r\n    var searchFilerActionButton = $('.a-search-filter-action-wrapper button');\r\n    if (searchFilters.is(':visible') && searchFilerActionButton.position().left === 0) {\r\n      $('.a-stickyHelp-container button').css('transform', 'translateY(-38px)');\r\n    } else {\r\n      $('.a-stickyHelp-container button').css('transform', 'translateY(0px)');\r\n    }\r\n  }\r\n\r\n  $(document.body).on('click', '.a-js-searchFilterToggle', function(e) {\r\n    var hideMainInbox = $('.a-js-hideElement');\r\n    var searchField = $('.a-js-filterFocus');\r\n    var searchFilters = $('.a-overlay-container');\r\n    var hideClass = 'd-none';\r\n\r\n    if (searchFilters.hasClass(hideClass)) {\r\n      searchFilters.removeClass(hideClass);\r\n      hideMainInbox.addClass(hideClass);\r\n      searchFilters.removeAttr('tabindex');\r\n      hideMainInbox.attr('tabindex', '-1');\r\n      searchField.attr('tabindex', '1').focus();\r\n      $('input#inbox_search_filter').val($('input#inbox_search').val());\r\n    } else {\r\n      searchFilters.addClass(hideClass);\r\n      hideMainInbox.removeClass(hideClass);\r\n      searchFilters.attr('tabindex', '-1');\r\n      hideMainInbox.removeAttr('tabindex');\r\n      $('input#inbox_search').val($('input#inbox_search_filter').val());\r\n    }\r\n    setTimeout(RepositionStickyHelp, 0);\r\n\r\n    $(window).off('resize', RepositionStickyHelp);\r\n    $(window).resize(RepositionStickyHelp);\r\n  });\r\n}\r\n","// Pie chart\r\nvar piechart = function() {\r\n  function $(selector, context, elements) {\r\n    context = context || document;\r\n    elements = context.querySelectorAll(selector);\r\n    return Array.prototype.slice.call(elements);\r\n  }\r\n\r\n  $('.a-pie').forEach(function(pie) {\r\n    var p = parseFloat(pie.textContent);\r\n    var NS = 'http://www.w3.org/2000/svg';\r\n    var svg = document.createElementNS(NS, 'svg');\r\n    var circle = document.createElementNS(NS, 'circle');\r\n    var title = document.createElementNS(NS, 'title');\r\n\r\n    circle.setAttribute('r', 16);\r\n    circle.setAttribute('cx', 16);\r\n    circle.setAttribute('cy', 16);\r\n    circle.setAttribute('stroke-dasharray', p + ' 100');\r\n\r\n    svg.setAttribute('viewBox', '0 0 32 32');\r\n    title.textContent = pie.textContent;\r\n    pie.textContent = '';\r\n    svg.appendChild(title);\r\n    svg.appendChild(circle);\r\n    pie.appendChild(svg);\r\n  });\r\n};\r\n","/* globals\r\n  AltinnModal\r\n  feedbackToggle\r\n  handleFocus\r\n  addListExpandHandler\r\n  initializeDatepicker\r\n  setupTruncateLines\r\n  newsArchive\r\n  menuToggleEffectAltinnett\r\n  popoverGlobalInit\r\n  popoverLocalInit\r\n  subscribe\r\n  togglePanel\r\n  questionnaireInteraction\r\n  setupFormValidation\r\n  setValidatorSettings\r\n  setupSlickCarousel\r\n  searchFilterView\r\n  piechart\r\n*/\r\nwindow.altinnettInit = function() {\r\n  AltinnModal.init();\r\n  feedbackToggle();\r\n  handleFocus();\r\n  addListExpandHandler();\r\n  initializeDatepicker();\r\n  setupTruncateLines();\r\n  newsArchive();\r\n  menuToggleEffectAltinnett();\r\n  popoverGlobalInit();\r\n  popoverLocalInit();\r\n  subscribe();\r\n  togglePanel();\r\n  questionnaireInteraction();\r\n  searchFilterView();\r\n  setupFormValidation();\r\n  setValidatorSettings();\r\n  piechart();\r\n\r\n  function setupForm() {\r\n    $('body').off('focus', '#contactForm', setupForm);\r\n    setupFormValidation('#contactForm', '#a-js-contactForm-submit');\r\n  }\r\n\r\n  $('body').on('focus', '#contactForm', setupForm);\r\n  setupSlickCarousel();\r\n};\r\n\r\nwindow.altinnettInit();\r\n"]}